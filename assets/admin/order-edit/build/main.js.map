{"version":3,"file":"main.js","mappings":";;;;;;;;;;;;AAAqB;AAErBA,MAAM,CAACC,QAAQ,CAAC,CAACC,KAAK,CAAEC,CAAC,IAAG;EAC1B;EACA,SAASC,mBAAmBA,CAAA,EAAG;IAC7B,MAAMC,aAAa,GAAGF,CAAC,CAAC,cAAc,CAAC;IACvC,MAAMG,cAAc,GAAGH,CAAC,CAAC,gBAAgB,CAAC;;IAE1C;IACA,IAAIE,aAAa,CAACE,MAAM,KAAK,CAAC,EAAE;MAC9BD,cAAc,CAACE,WAAW,CAAC,QAAQ,CAAC,CAACC,IAAI,CAAC,CAAC;IAC7C;EACF;;EAEA;EACAL,mBAAmB,CAAC,CAAC;EACrB;EACA,SAASM,kBAAkBA,CAAA,EAAG;IAC5B,MAAMC,iBAAiB,GAAGC,YAAY,CAACC,OAAO,CAAC,6BAA6B,CAAC;IAC7E,MAAMC,aAAa,GAAGF,YAAY,CAACC,OAAO,CAAC,yBAAyB,CAAC;IACrE,OAAO,CAACF,iBAAiB,IAAI,CAACG,aAAa;EAC7C;;EAEA;EACA,SAASC,mBAAmBA,CAAA,EAAG;IAC7B,MAAMC,gBAAgB,GAAGb,CAAC,CAAC,4BAA4B,CAAC;IAExD,IAAI,CAACO,kBAAkB,CAAC,CAAC,EAAE;MACzBM,gBAAgB,CAACC,IAAI,CAAC,CAAC;MACvB;IACF;;IAEA;IACAC,UAAU,CAAC,MAAM;MACfF,gBAAgB,CAACG,MAAM,CAAC,GAAG,CAAC;IAC9B,CAAC,EAAE,IAAI,CAAC;;IAER;IACAhB,CAAC,CAAC,2BAA2B,CAAC,CAACiB,EAAE,CAAC,OAAO,EAAE,YAAW;MACpD;MACAR,YAAY,CAACS,OAAO,CAAC,yBAAyB,EAAE,MAAM,CAAC;;MAEvD;MACAC,mBAAmB,CAACC,oBAAoB,CAACC,iBAAiB,CAAC;;MAE3D;MACAN,UAAU,CAAC,MAAM;QACfF,gBAAgB,CAACS,OAAO,CAAC,GAAG,CAAC;MAC/B,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC;;IAEF;IACAtB,CAAC,CAAC,4BAA4B,CAAC,CAACiB,EAAE,CAAC,OAAO,EAAE,YAAW;MACrDR,YAAY,CAACS,OAAO,CAAC,6BAA6B,EAAE,MAAM,CAAC;MAC3DL,gBAAgB,CAACS,OAAO,CAAC,GAAG,CAAC;IAC/B,CAAC,CAAC;;IAEF;IACAtB,CAAC,CAAC,0BAA0B,CAAC,CAACiB,EAAE,CAAC,OAAO,EAAE,YAAW;MACnDJ,gBAAgB,CAACS,OAAO,CAAC,GAAG,CAAC;IAC/B,CAAC,CAAC;EACJ;;EAEA;EACA,SAASH,mBAAmBA,CAACI,OAAO,EAAE;IACpC,MAAMV,gBAAgB,GAAGb,CAAC,CAAC,4BAA4B,CAAC;IAExDa,gBAAgB,CAACW,IAAI,CAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAcD,OAAQ;AACtB;AACA;AACA;AACA,KAAK,CAAC;EACJ;;EAEA;EACAX,mBAAmB,CAAC,CAAC;EAErBZ,CAAC,CAAC,0BAA0B,CAAC,CAACyB,KAAK,CAAC,YAAY;IAC9C,IAAIC,QAAQ,GAAG1B,CAAC,CAAC,oCAAoC,CAAC;IAEtD,IAAI2B,OAAO,GAAG3B,CAAC,CAAC,IAAI,CAAC;IACrB,MAAM4B,WAAW,GAAG5B,CAAC,CAAC,IAAI,CAAC,CAAC6B,IAAI,CAAC,MAAM,CAAC;IACxCF,OAAO,CAACE,IAAI,CAAC,KAAK,CAAC,CAACC,WAAW,CAAC,YAAY,CAAC;IAE7C,IAAIJ,QAAQ,CAACK,QAAQ,CAAC,UAAU,CAAC,EAAE;MACjCL,QAAQ,CAACrB,WAAW,CAAC,UAAU,CAAC,CAAC2B,QAAQ,CAAC,gBAAgB,CAAC;MAC3DJ,WAAW,CAACK,IAAI,CAACN,OAAO,CAACO,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACnD,CAAC,MAAM;MACLR,QAAQ,CAACrB,WAAW,CAAC,gBAAgB,CAAC,CAAC2B,QAAQ,CAAC,UAAU,CAAC;MAC3DJ,WAAW,CAACK,IAAI,CAACN,OAAO,CAACO,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACnD;EACF,CAAC,CAAC;EAEF,MAAMC,eAAe,GAAGnC,CAAC,CAAC,gBAAgB,CAAC;EAC3C,MAAMoC,cAAc,GAAGD,eAAe,CAACN,IAAI,CAAC,uBAAuB,CAAC;EAEpEO,cAAc,CAACnB,EAAE,CAAC,OAAO,EAAE,YAAY;IACrC,IAAIoB,YAAY,GAAGrC,CAAC,CAAC,IAAI,CAAC,CAACsC,OAAO,CAAC,IAAI,CAAC;IAExCC,yBAAyB,CACvBJ,eAAe,EACfE,YACF,CAAC;EACH,CAAC,CAAC;;EAEF;EACAF,eAAe,CAACN,IAAI,CAAC,sCAAsC,CAAC,CAACZ,EAAE,CAAC,QAAQ,EAAE,YAAW;IACnF,MAAMuB,eAAe,GAAGxC,CAAC,CAAC,IAAI,CAAC,CAACyC,GAAG,CAAC,CAAC;IACrC,MAAMC,cAAc,GAAG1C,CAAC,CAAC,2BAA2B,CAAC;IACrD,MAAM2C,cAAc,GAAG3C,CAAC,CAAC,8BAA8B,CAAC;IACxD,MAAM4C,cAAc,GAAG5C,CAAC,CAAC,uBAAuB,CAAC;IACjD,MAAM6C,cAAc,GAAG7C,CAAC,CAAC,2BAA2B,CAAC;IAErD,IAAIwC,eAAe,KAAK,sBAAsB,EAAE;MAC9C;MACAE,cAAc,CAACV,QAAQ,CAAC,QAAQ,CAAC;MACjCW,cAAc,CAACtC,WAAW,CAAC,QAAQ,CAAC;MACpCuC,cAAc,CAACZ,QAAQ,CAAC,QAAQ,CAAC;MACjC;MACA;MACA,IAAIa,cAAc,CAACzC,MAAM,GAAG,CAAC,EAAE;QAC7ByC,cAAc,CAACxC,WAAW,CAAC,QAAQ,CAAC;MACtC;;MAEA;MACAL,CAAC,CAAC,mCAAmC,CAAC,CAACgC,QAAQ,CAAC,QAAQ,CAAC;MACzDhC,CAAC,CAAC,iCAAiC,CAAC,CAACgC,QAAQ,CAAC,QAAQ,CAAC;IACzD,CAAC,MAAM,IAAIQ,eAAe,EAAE;MAC1B;MACAE,cAAc,CAACrC,WAAW,CAAC,QAAQ,CAAC;MACpCsC,cAAc,CAACX,QAAQ,CAAC,QAAQ,CAAC;MACjCY,cAAc,CAACvC,WAAW,CAAC,QAAQ,CAAC;MACpC;MACA;MACA,IAAIwC,cAAc,CAACzC,MAAM,GAAG,CAAC,EAAE;QAC7ByC,cAAc,CAACb,QAAQ,CAAC,QAAQ,CAAC;MACnC;IACF,CAAC,MAAM;MACL;MACAU,cAAc,CAACV,QAAQ,CAAC,QAAQ,CAAC;MACjCW,cAAc,CAACX,QAAQ,CAAC,QAAQ,CAAC;MACjCY,cAAc,CAACZ,QAAQ,CAAC,QAAQ,CAAC;MACjC;MACA,IAAIa,cAAc,CAACzC,MAAM,GAAG,CAAC,EAAE;QAC7ByC,cAAc,CAACb,QAAQ,CAAC,QAAQ,CAAC;MACnC;IACF;EACF,CAAC,CAAC;;EAEF;EACA,MAAMU,cAAc,GAAG1C,CAAC,CAAC,2BAA2B,CAAC;EACrD,MAAM2C,cAAc,GAAG3C,CAAC,CAAC,8BAA8B,CAAC;EACxD,MAAM4C,cAAc,GAAG5C,CAAC,CAAC,uBAAuB,CAAC;EACjD,MAAM6C,cAAc,GAAG7C,CAAC,CAAC,2BAA2B,CAAC;;EAErD;EACA0C,cAAc,CAACV,QAAQ,CAAC,QAAQ,CAAC;EACjCW,cAAc,CAACX,QAAQ,CAAC,QAAQ,CAAC;EACjCY,cAAc,CAACZ,QAAQ,CAAC,QAAQ,CAAC;EACjC,IAAIa,cAAc,CAACzC,MAAM,GAAG,CAAC,EAAE;IAC7ByC,cAAc,CAACb,QAAQ,CAAC,QAAQ,CAAC;EACnC;;EAEA;EACA,IAAIc,wBAAwB,GAAG,IAAI;EAEnC,SAASC,qBAAqBA,CAAA,EAAG;IAC/B,MAAMC,iBAAiB,GAAGhD,CAAC,CAAC,yBAAyB,CAAC;IACtD,IAAIgD,iBAAiB,CAAC5C,MAAM,KAAK,CAAC,EAAE;IAEpC,MAAM6C,KAAK,GAAGD,iBAAiB,CAACnB,IAAI,CAAC,gBAAgB,CAAC;IACtD,IAAIoB,KAAK,CAAC7C,MAAM,KAAK,CAAC,EAAE;IAExB,IAAI8C,YAAY,GAAG,CAAC;;IAEpB;IACA,IAAIJ,wBAAwB,EAAE;MAC5BK,aAAa,CAACL,wBAAwB,CAAC;IACzC;;IAEA;IACAA,wBAAwB,GAAGM,WAAW,CAAC,YAAW;MAChD,MAAMC,WAAW,GAAGJ,KAAK,CAACK,EAAE,CAACJ,YAAY,CAAC;MAC1C,MAAMK,SAAS,GAAG,CAACL,YAAY,GAAG,CAAC,IAAID,KAAK,CAAC7C,MAAM;MACnD,MAAMoD,QAAQ,GAAGP,KAAK,CAACK,EAAE,CAACC,SAAS,CAAC;;MAEpC;MACAF,WAAW,CAAChD,WAAW,CAAC,QAAQ,CAAC;MACjCmD,QAAQ,CAACxB,QAAQ,CAAC,QAAQ,CAAC;MAC3BkB,YAAY,GAAGK,SAAS;IAE1B,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;EACZ;EAEA,SAASE,oBAAoBA,CAAA,EAAG;IAC9B,IAAIX,wBAAwB,EAAE;MAC5BK,aAAa,CAACL,wBAAwB,CAAC;MACvCA,wBAAwB,GAAG,IAAI;IACjC;;IAEA;IACA,MAAME,iBAAiB,GAAGhD,CAAC,CAAC,yBAAyB,CAAC;IACtD,IAAIgD,iBAAiB,CAAC5C,MAAM,GAAG,CAAC,EAAE;MAChC,MAAM6C,KAAK,GAAGD,iBAAiB,CAACnB,IAAI,CAAC,gBAAgB,CAAC;MACtDoB,KAAK,CAAC5C,WAAW,CAAC,QAAQ,CAAC;MAC3B4C,KAAK,CAACK,EAAE,CAAC,CAAC,CAAC,CAACtB,QAAQ,CAAC,QAAQ,CAAC;IAChC;EACF;;EAEA;EACAe,qBAAqB,CAAC,CAAC;;EAEvB;EACAZ,eAAe,CAACN,IAAI,CAAC,uBAAuB,CAAC,CAACZ,EAAE,CAAC,OAAO,EAAE,YAAW;IACnE,MAAMyC,WAAW,GAAG1D,CAAC,CAAC,wBAAwB,CAAC;IAC/C,MAAM2D,MAAM,GAAG3D,CAAC,CAAC,IAAI,CAAC;IAEtB,IAAI0D,WAAW,CAAC3B,QAAQ,CAAC,QAAQ,CAAC,EAAE;MAClC2B,WAAW,CAACrD,WAAW,CAAC,QAAQ,CAAC;MACjCsD,MAAM,CAACnC,IAAI,CAAC,gNAAgN,CAAC;IAC/N,CAAC,MAAM;MACLkC,WAAW,CAAC1B,QAAQ,CAAC,QAAQ,CAAC;MAC9B2B,MAAM,CAACnC,IAAI,CAAC,sVAAsV,CAAC;IACrW;EACF,CAAC,CAAC;;EAEF;EACAW,eAAe,CAACN,IAAI,CAAC,sCAAsC,CAAC,CAACZ,EAAE,CAAC,QAAQ,EAAE,YAAW;IACnF,MAAM2C,YAAY,GAAG5D,CAAC,CAAC,IAAI,CAAC,CAACyC,GAAG,CAAC,CAAC;IAClC,MAAMoB,qBAAqB,GAAG7D,CAAC,CAAC,mCAAmC,CAAC;IACpE,MAAM8D,mBAAmB,GAAG9D,CAAC,CAAC,iCAAiC,CAAC;;IAEhE;IACA6D,qBAAqB,CAAC7B,QAAQ,CAAC,QAAQ,CAAC;IACxC8B,mBAAmB,CAAC9B,QAAQ,CAAC,QAAQ,CAAC;;IAEtC;IACA,IAAI4B,YAAY,KAAK,SAAS,IAAIA,YAAY,KAAK,SAAS,EAAE;MAC5DC,qBAAqB,CAACxD,WAAW,CAAC,QAAQ,CAAC;IAC7C,CAAC,MAAM,IAAIuD,YAAY,KAAK,UAAU,EAAE;MACtCE,mBAAmB,CAACzD,WAAW,CAAC,QAAQ,CAAC;MACzC0D,eAAe,CAAC,CAAC;IACnB;EACF,CAAC,CAAC;;EAEF;EACA,SAASC,gBAAgBA,CAACzC,OAAO,EAAE0C,IAAI,GAAG,MAAM,EAAE;IAChD;IACAjE,CAAC,CAAC,mBAAmB,CAAC,CAACkE,MAAM,CAAC,CAAC;;IAE/B;IACA,MAAMC,YAAY,GAAGnE,CAAC,CAAE;AAC5B;AACA;AACA;AACA,cAAciE,IAAI,KAAK,SAAS,GAAG,mRAAmR,GACxSA,IAAI,KAAK,OAAO,GAAG,mWAAmW,GACtX,6QAA8Q;AAC5R;AACA;AACA,2DAA2D1C,OAAQ;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,CAAC;;IAEF;IACAvB,CAAC,CAAC,MAAM,CAAC,CAACoE,MAAM,CAACD,YAAY,CAAC;;IAE9B;IACApD,UAAU,CAAC,MAAM;MACfoD,YAAY,CAAC9D,WAAW,CAAC,kBAAkB,CAAC;IAC9C,CAAC,EAAE,GAAG,CAAC;;IAEP;IACAU,UAAU,CAAC,MAAM;MACfoD,YAAY,CAACnC,QAAQ,CAAC,kBAAkB,CAAC;MACzCjB,UAAU,CAAC,MAAM;QACfoD,YAAY,CAACD,MAAM,CAAC,CAAC;MACvB,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,EAAE,IAAI,CAAC;;IAER;IACAC,YAAY,CAACtC,IAAI,CAAC,yBAAyB,CAAC,CAACZ,EAAE,CAAC,OAAO,EAAE,YAAW;MAClEkD,YAAY,CAACnC,QAAQ,CAAC,kBAAkB,CAAC;MACzCjB,UAAU,CAAC,MAAM;QACfoD,YAAY,CAACD,MAAM,CAAC,CAAC;MACvB,CAAC,EAAE,GAAG,CAAC;IACT,CAAC,CAAC;EACJ;;EAEA;EACA,SAASH,eAAeA,CAAA,EAAG;IACzB,MAAMM,gBAAgB,GAAGrE,CAAC,CAAC,uBAAuB,CAAC;IAC/CqE,gBAAgB,CAAC7C,IAAI,CAAE,oBAAmBJ,oBAAoB,CAACkD,uBAAwB,WAAU,CAAC;;IAEtG;IACA,MAAMC,OAAO,GAAGvE,CAAC,CAAC,2BAA2B,CAAC,CAACkC,IAAI,CAAC,UAAU,CAAC;;IAE/D;IACA,MAAMsC,gBAAgB,GAAGxE,CAAC,CAAC,iBAAiB,CAAC,CAACyC,GAAG,CAAC,CAAC,IAAI,UAAU;;IAEjE;IACA,IAAIgC,YAAY,GAAG,EAAE;IACrB,MAAMC,kBAAkB,GAAG1E,CAAC,CAAC,kBAAkB,CAAC;IAChD,IAAI0E,kBAAkB,CAACtE,MAAM,EAAE;MAC7B;MACA,MAAMuE,cAAc,GAAGD,kBAAkB,CAAC7C,IAAI,CAAC,iBAAiB,CAAC;MACjE,IAAI8C,cAAc,CAACvE,MAAM,IAAIuE,cAAc,CAAC1C,IAAI,CAAC,CAAC,EAAE;QAClDwC,YAAY,GAAGE,cAAc,CAAC1C,IAAI,CAAC,CAAC;MACtC,CAAC,MAAM;QACL;QACAwC,YAAY,GAAGC,kBAAkB,CAACjC,GAAG,CAAC,CAAC;MACzC;IACF;IAEA,MAAMmC,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1D,MAAMC,OAAO,GAAG,IAAIH,IAAI,CAACA,IAAI,CAACI,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACH,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAE7F,MAAM7C,IAAI,GAAG;MACXgD,MAAM,EAAE,+BAA+B;MACvCC,QAAQ,EAAE/D,oBAAoB,CAACgE,sBAAsB;MACrDC,UAAU,EAAET,SAAS;MACrBU,QAAQ,EAAEN,OAAO;MACjBO,IAAI,EAAEd,YAAY;MAClBe,QAAQ,EAAEhB;IACZ,CAAC;IAEDxE,CAAC,CAACyF,IAAI,CAACC,OAAO,EAAExD,IAAI,EAAE,UAASyD,QAAQ,EAAE;MACvCC,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEF,QAAQ,CAAC;MAEnD,IAAIA,QAAQ,CAACG,OAAO,IAAIH,QAAQ,CAACzD,IAAI,EAAE;QACrC0D,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,QAAQ,CAACzD,IAAI,CAAC;;QAE5C;QACA,MAAM6D,KAAK,GAAGJ,QAAQ,CAACzD,IAAI,CAAC6D,KAAK,IAAIJ,QAAQ,CAACzD,IAAI;QAElD,IAAI,OAAO6D,KAAK,KAAK,QAAQ,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,EAAE;UACtD;UACA,IAAIG,OAAO,GAAG,8CAA8C;UAC5D,IAAIC,WAAW,GAAG,KAAK;UAEvBC,MAAM,CAACC,IAAI,CAACN,KAAK,CAAC,CAACO,OAAO,CAAC,UAASC,MAAM,EAAE;YAC1C,IAAIP,KAAK,CAACC,OAAO,CAACF,KAAK,CAACQ,MAAM,CAAC,CAAC,IAAIR,KAAK,CAACQ,MAAM,CAAC,CAACnG,MAAM,GAAG,CAAC,EAAE;cAC5D+F,WAAW,GAAG,IAAI;cAClBJ,KAAK,CAACQ,MAAM,CAAC,CAACD,OAAO,CAAC,UAASE,IAAI,EAAE;gBACnCN,OAAO,IAAK,kBAAiBM,IAAK,KAAIA,IAAK,MAAKD,MAAO,WAAU;cACnE,CAAC,CAAC;YACJ;UACF,CAAC,CAAC;UAEF,IAAIJ,WAAW,EAAE;YACf9B,gBAAgB,CAAC7C,IAAI,CAAC0E,OAAO,CAAC;UAChC,CAAC,MAAM;YACLlC,gBAAgB,CAAC,yBAAyB,EAAE,MAAM,CAAC;YACnDK,gBAAgB,CAAC7C,IAAI,CAAC,mDAAmD,CAAC;UAC5E;QACF,CAAC,MAAM,IAAIwE,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,IAAIA,KAAK,CAAC3F,MAAM,GAAG,CAAC,EAAE;UACnD;UACA,IAAI8F,OAAO,GAAG,8CAA8C;UAC5DH,KAAK,CAACO,OAAO,CAAC,UAASE,IAAI,EAAE;YAC3BN,OAAO,IAAK,kBAAiBM,IAAK,KAAIA,IAAK,WAAU;UACvD,CAAC,CAAC;UACFnC,gBAAgB,CAAC7C,IAAI,CAAC0E,OAAO,CAAC;UAE9B,IAAIP,QAAQ,CAACzD,IAAI,CAACX,OAAO,EAAE;YACzBqE,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,QAAQ,CAACzD,IAAI,CAACX,OAAO,CAAC;UAC5D;QACF,CAAC,MAAM;UACL;UACA,MAAMA,OAAO,GAAGoE,QAAQ,CAACzD,IAAI,CAACX,OAAO,IAAI,yBAAyB;UAClEqE,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEtE,OAAO,CAAC;UACpDyC,gBAAgB,CAACzC,OAAO,EAAE,MAAM,CAAC;UACjC8C,gBAAgB,CAAC7C,IAAI,CAAC,mDAAmD,CAAC;UAC1EoE,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEtE,OAAO,CAAC;QACpD;MACF,CAAC,MAAM;QACLqE,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEF,QAAQ,CAAC;QACjEtB,gBAAgB,CAAC7C,IAAI,CAAE,oBAAmBJ,oBAAoB,CAACqF,mBAAoB,WAAU,CAAC;MAChG;IACF,CAAC,CAAC,CAACC,IAAI,CAAC,UAASC,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAE;MACnCjB,OAAO,CAACiB,KAAK,CAAC,8BAA8B,EAAE;QAACF,GAAG;QAAEC,MAAM;QAAEC;MAAK,CAAC,CAAC;MACnExC,gBAAgB,CAAC7C,IAAI,CAAE,oBAAmBJ,oBAAoB,CAACqF,mBAAoB,WAAU,CAAC;IAChG,CAAC,CAAC;EACJ;EAEA,MAAMK,cAAc,GAAG3E,eAAe,CAACN,IAAI,CAAC,uBAAuB,CAAC;EAEpEiF,cAAc,CAAC7F,EAAE,CAAC,OAAO,EAAE,YAAW;IACpC,MAAM8F,IAAI,GAAG/G,CAAC,CAAC,IAAI,CAAC,CAACsC,OAAO,CAAC,gBAAgB,CAAC;IAE9C,MAAMJ,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAAC4F,wBAAwB;MACrD7B,QAAQ,EAAE/D,oBAAoB,CAAC6F,uBAAuB;MACtDC,QAAQ,EAAElH,CAAC,CAAC,IAAI,CAAC,CAACkC,IAAI,CAAC,UAAU;IACnC,CAAC;IAEDA,IAAI,CAACd,oBAAoB,CAAC+F,8BAA8B,CAAC,GAAGJ,IAAI,CAAClF,IAAI,CAAC,8CAA8C,CAAC,CAACY,GAAG,CAAC,CAAC;IAC3HP,IAAI,CAACd,oBAAoB,CAACgG,mCAAmC,CAAC,GAAGL,IAAI,CAAClF,IAAI,CAAC,qBAAqB,CAAC,CAACY,GAAG,CAAC,CAAC;IAEvGzC,CAAC,CAACyF,IAAI,CACJC,OAAO,EACPxD,IAAI,EACJ,YAAY;MACVmF,QAAQ,CAACC,MAAM,CAAC,CAAC;IACnB,CACF,CAAC,CAACZ,IAAI,CAAC,YAAY,CACnB,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA,SAASa,oBAAoBA,CAAA,EAAG;IAC9B,MAAMC,UAAU,GAAGxH,CAAC,CAAC,8BAA8B,CAAC;;IAEpD;IACAwH,UAAU,CAACC,KAAK,CAAC,CAAC;;IAElB;IACAC,kBAAkB,CAAC,CAAC;EACtB;;EAEA;EACA,SAASA,kBAAkBA,CAAA,EAAG;IAC5B,MAAMF,UAAU,GAAGxH,CAAC,CAAC,8BAA8B,CAAC;IACpD,MAAM2H,YAAY,GAAGH,UAAU,CAAC3F,IAAI,CAAC,wBAAwB,CAAC,CAACzB,MAAM;IAErE,MAAMwH,WAAW,GAAI;AACzB;AACA,+FAA+FD,YAAY,GAAG,CAAE;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kRAAkRA,YAAY,KAAK,CAAC,GAAG,6BAA6B,GAAG,EAAG;AAC1U;AACA;AACA;AACA;AACA;AACA,KAAK;IAEDH,UAAU,CAACpD,MAAM,CAACwD,WAAW,CAAC;IAC9BC,mBAAmB,CAAC,CAAC;EACvB;;EAEA;EACA,SAASA,mBAAmBA,CAAA,EAAG;IAC7B,MAAML,UAAU,GAAGxH,CAAC,CAAC,8BAA8B,CAAC;IACpDwH,UAAU,CAAC3F,IAAI,CAAC,wBAAwB,CAAC,CAACiG,IAAI,CAAC,UAASC,KAAK,EAAE;MAC7D/H,CAAC,CAAC,IAAI,CAAC,CAAC6B,IAAI,CAAC,MAAM,CAAC,CAACmG,KAAK,CAAC,CAAC,CAAC/F,IAAI,CAAC,OAAO,IAAI8F,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;;MAE9D;MACA,IAAIA,KAAK,KAAK,CAAC,EAAE;QACf/H,CAAC,CAAC,IAAI,CAAC,CAAC6B,IAAI,CAAC,0BAA0B,CAAC,CAACoG,GAAG,CAAC,YAAY,EAAE,QAAQ,CAAC;MACtE,CAAC,MAAM;QACLjI,CAAC,CAAC,IAAI,CAAC,CAAC6B,IAAI,CAAC,0BAA0B,CAAC,CAACoG,GAAG,CAAC,YAAY,EAAE,SAAS,CAAC;MACvE;IACF,CAAC,CAAC;EACJ;;EAEA;EACAjI,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,uBAAuB,EAAE,UAASiH,CAAC,EAAE;IAC3DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBT,kBAAkB,CAAC,CAAC;EACtB,CAAC,CAAC;;EAEF;EACA1H,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,0BAA0B,EAAE,UAASiH,CAAC,EAAE;IAC9DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,MAAMX,UAAU,GAAGxH,CAAC,CAAC,8BAA8B,CAAC;;IAEpD;IACA,IAAIwH,UAAU,CAAC3F,IAAI,CAAC,wBAAwB,CAAC,CAACzB,MAAM,GAAG,CAAC,EAAE;MACxDJ,CAAC,CAAC,IAAI,CAAC,CAACoI,OAAO,CAAC,wBAAwB,CAAC,CAAClE,MAAM,CAAC,CAAC;MAClD2D,mBAAmB,CAAC,CAAC;IACvB;EACF,CAAC,CAAC;;EAEF;EACAN,oBAAoB,CAAC,CAAC;;EAEtB;EACA;EACA;;EAEA;EACA,MAAMc,sBAAsB,GAAGlG,eAAe,CAACN,IAAI,CAAC,2BAA2B,CAAC;EAEhFwG,sBAAsB,CAACpH,EAAE,CAAC,OAAO,EAAE,YAAW;IAC5C,MAAMU,OAAO,GAAG3B,CAAC,CAAC,IAAI,CAAC;IACvB,MAAMsI,YAAY,GAAG3G,OAAO,CAACM,IAAI,CAAC,CAAC;IACnC,MAAMsG,YAAY,GAAGvI,CAAC,CAAC,8CAA8C,CAAC,CAACyC,GAAG,CAAC,CAAC;IAC5E,MAAM+F,YAAY,GAAGxI,CAAC,CAAC,yBAAyB,CAAC,CAACyC,GAAG,CAAC,CAAC;IACvD,MAAMgG,UAAU,GAAGzI,CAAC,CAAC,uBAAuB,CAAC,CAACyC,GAAG,CAAC,CAAC;IACnD,MAAMiG,WAAW,GAAG1I,CAAC,CAAC,qBAAqB,CAAC,CAACyC,GAAG,CAAC,CAAC;;IAElD;IACA,IAAI,CAACiG,WAAW,EAAE;MAChBC,KAAK,CAAC,sBAAsB,CAAC;MAC7B;IACF;;IAEA;IACA,MAAMC,QAAQ,GAAG,EAAE;IACnB,IAAIC,QAAQ,GAAG,KAAK;IAEpB7I,CAAC,CAAC,qDAAqD,CAAC,CAAC8H,IAAI,CAAC,YAAW;MACvE,MAAMgB,IAAI,GAAG9I,CAAC,CAAC,IAAI,CAAC,CAAC6B,IAAI,CAAC,wBAAwB,CAAC,CAACY,GAAG,CAAC,CAAC;MAEzD,IAAI,CAACqG,IAAI,IAAIC,UAAU,CAACD,IAAI,CAAC,GAAG,IAAI,EAAE;QACpCD,QAAQ,GAAG,IAAI;QACf,OAAO,KAAK,CAAC,CAAC;MAChB;MAEAD,QAAQ,CAACI,IAAI,CAAC;QACZF,IAAI,EAAEC,UAAU,CAACD,IAAI;MACvB,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAID,QAAQ,IAAID,QAAQ,CAACxI,MAAM,KAAK,CAAC,EAAE;MACrCuI,KAAK,CAAC,yDAAyD,CAAC;MAChE;IACF;;IAEA;IACA,IAAI,CAACJ,YAAY,KAAK,SAAS,IAAIA,YAAY,KAAK,SAAS,KAAK,CAACC,YAAY,EAAE;MAC/EG,KAAK,CAAC,kCAAkC,CAAC;MACzC;IACF;IAEA,IAAIJ,YAAY,KAAK,UAAU,IAAI,CAACE,UAAU,EAAE;MAC9CE,KAAK,CAAC,+BAA+B,CAAC;MACtC;IACF;;IAEA;IACAhH,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAAC8H,sBAAsB,CAAC;IAEhF,MAAMhH,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAAC+H,+BAA+B;MAC5DhE,QAAQ,EAAE/D,oBAAoB,CAACgI,8BAA8B;MAC7DlC,QAAQ,EAAElH,CAAC,CAAC,IAAI,CAAC,CAACkC,IAAI,CAAC,UAAU,CAAC;MAClC0G,QAAQ,EAAES,IAAI,CAACC,SAAS,CAACV,QAAQ,CAAC;MAClC3E,IAAI,EAAEsE,YAAY;MAClBgB,aAAa,EAAEf,YAAY,IAAI,EAAE;MACjCgB,aAAa,EAAEf,UAAU,IAAI,EAAE;MAC/BgB,YAAY,EAAEf;IAChB,CAAC;IAED1I,CAAC,CAACyF,IAAI,CACJC,OAAO,EACPxD,IAAI,EACJ,UAAUyD,QAAQ,EAAE;MAClB,IAAIA,QAAQ,CAACG,OAAO,EAAE;QACpB;QACAF,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,QAAQ,CAAC;;QAE3C;QACA,IAAI+D,QAAQ,GAAG,IAAI;QAEnB,IAAI/D,QAAQ,CAACzD,IAAI,IAAIyD,QAAQ,CAACzD,IAAI,CAACyH,aAAa,IAAIhE,QAAQ,CAACzD,IAAI,CAACyH,aAAa,CAACC,SAAS,EAAE;UACzFF,QAAQ,GAAG/D,QAAQ,CAACzD,IAAI,CAACyH,aAAa,CAACC,SAAS;QAClD,CAAC,MAAM,IAAIjE,QAAQ,CAACzD,IAAI,IAAIyD,QAAQ,CAACzD,IAAI,CAAC0H,SAAS,EAAE;UACnDF,QAAQ,GAAG/D,QAAQ,CAACzD,IAAI,CAAC0H,SAAS;QACpC,CAAC,MAAM,IAAIjE,QAAQ,CAACiE,SAAS,EAAE;UAC7BF,QAAQ,GAAG/D,QAAQ,CAACiE,SAAS;QAC/B;QAEAhE,OAAO,CAACC,GAAG,CAAC,YAAY,EAAE6D,QAAQ,CAAC;QAEnC,IAAIA,QAAQ,EAAE;UACZG,qBAAqB,CAACH,QAAQ,CAAC;QACjC,CAAC,MAAM;UACL;UACA9D,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;UACjDwB,QAAQ,CAACC,MAAM,CAAC,CAAC;QACnB;MACF,CAAC,MAAM;QACLqB,KAAK,CAAC,QAAQ,IAAIhD,QAAQ,CAACzD,IAAI,IAAI,iBAAiB,CAAC,CAAC;MACxD;IACF,CACF,CAAC,CAACwE,IAAI,CAAC,UAAUC,GAAG,EAAE;MACpB,MAAMmD,QAAQ,GAAGnD,GAAG,CAACoD,YAAY,IAAIpD,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAGyE,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAG,iBAAiB;MACtGyG,KAAK,CAAC,QAAQ,GAAGmB,QAAQ,CAAC;IAC5B,CAAC,CAAC,CAACE,MAAM,CAAC,YAAW;MACnB;MACArI,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA,SAASuB,qBAAqBA,CAACH,QAAQ,EAAE;IACvC,MAAMd,QAAQ,GAAGc,QAAQ,CAACd,QAAQ,IAAI,EAAE;IACxC,MAAMqB,OAAO,GAAGP,QAAQ,CAACO,OAAO,IAAI,CAAC,CAAC;;IAEtC;IACA,IAAI1I,OAAO,GAAG,qCAAqC;IACnDA,OAAO,IAAI,0BAA0B;IACrCA,OAAO,IAAI,6BAA6B;IACxCA,OAAO,IAAIwH,UAAU,CAACkB,OAAO,CAACC,mBAAmB,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,IAAIF,OAAO,CAACG,QAAQ,IAAI,KAAK,CAAC;IAEjG,IAAIH,OAAO,CAACI,QAAQ,EAAE;MACpB9I,OAAO,IAAI,eAAe,GAAG,CAAC0I,OAAO,CAACI,QAAQ,GAAG,GAAG,EAAEF,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;IACxE;IAEA5I,OAAO,IAAI,8BAA8B;IACzCA,OAAO,IAAI,qBAAqB;IAEhCqH,QAAQ,CAACtC,OAAO,CAAC,CAACgE,GAAG,EAAEvC,KAAK,KAAK;MAC/BxG,OAAO,IAAI,OAAO,IAAI+I,GAAG,CAACC,cAAc,IAAKxC,KAAK,GAAG,CAAE,CAAC,GAAG,IAAI;MAC/DxG,OAAO,IAAIwH,UAAU,CAACuB,GAAG,CAACxB,IAAI,CAAC,CAACqB,OAAO,CAAC,CAAC,CAAC,GAAG,UAAU;MACvD5I,OAAO,IAAIwH,UAAU,CAACuB,GAAG,CAACE,aAAa,CAAC,CAACL,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,IAAIF,OAAO,CAACG,QAAQ,IAAI,KAAK,CAAC;MACvF7I,OAAO,IAAI,IAAI;IACjB,CAAC,CAAC;IAEFoH,KAAK,CAACpH,OAAO,CAAC;IACd8F,QAAQ,CAACC,MAAM,CAAC,CAAC;EACnB;;EAEA;EACAtH,CAAC,CAACF,QAAQ,CAAC,CAAC2K,GAAG,CAAC,OAAO,EAAE,yBAAyB,CAAC,CAACxJ,EAAE,CAAC,OAAO,EAAE,yBAAyB,EAAE,UAASiH,CAAC,EAAE;IACrGA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBD,CAAC,CAACwC,eAAe,CAAC,CAAC,CAAC,CAAC;;IAErB,MAAMC,UAAU,GAAG3K,CAAC,CAAC,IAAI,CAAC,CAACkC,IAAI,CAAC,aAAa,CAAC;IAC9C,MAAMqC,OAAO,GAAGvE,CAAC,CAAC,IAAI,CAAC,CAACkC,IAAI,CAAC,UAAU,CAAC;IACxC,MAAM0I,KAAK,GAAG5K,CAAC,CAAC,yBAAyB,CAAC;IAC1C,MAAM6K,OAAO,GAAG7K,CAAC,CAAC,2BAA2B,CAAC;;IAE9C;IACA,IAAI,CAAC2K,UAAU,IAAI,CAACpG,OAAO,EAAE;MAC3BoE,KAAK,CAAC,qCAAqC,CAAC;MAC5C;IACF;;IAEA;IACAiC,KAAK,CAACvK,WAAW,CAAC,QAAQ,CAAC;IAC3BU,UAAU,CAAC,MAAM;MACf6J,KAAK,CAAC/I,IAAI,CAAC,oBAAoB,CAAC,CAACxB,WAAW,CAAC,oBAAoB,CAAC,CAAC2B,QAAQ,CAAC,uBAAuB,CAAC;IACtG,CAAC,EAAE,EAAE,CAAC;;IAEN;IACA6I,OAAO,CAACrJ,IAAI,CAAE,oCAAmCJ,oBAAoB,CAAC0J,wBAAyB,MAAK,CAAC;;IAErG;IACA,MAAM5I,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAAC2J,8BAA8B;MAC3D5F,QAAQ,EAAE/D,oBAAoB,CAAC4J,6BAA6B;MAC5DC,WAAW,EAAEN;IACf,CAAC;IAED/E,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE3D,IAAI,CAAC;IAE3ClC,CAAC,CAACyF,IAAI,CAACC,OAAO,EAAExD,IAAI,EAAE,UAASyD,QAAQ,EAAE;MACvC,IAAIA,QAAQ,CAACG,OAAO,EAAE;QACpB+E,OAAO,CAACrJ,IAAI,CAAC0J,qBAAqB,CAACvF,QAAQ,CAACzD,IAAI,CAAC,CAAC;MACpD,CAAC,MAAM;QACL,MAAM4H,QAAQ,GAAGnE,QAAQ,CAACzD,IAAI,IAAI,eAAe;QACjD2I,OAAO,CAACrJ,IAAI,CAAC,mHAAmH,GAAGsI,QAAQ,GAAG,YAAY,CAAC;MAC7J;IACF,CAAC,CAAC,CAACpD,IAAI,CAAC,UAASC,GAAG,EAAE;MACpB,MAAMmD,QAAQ,GAAGnD,GAAG,CAACoD,YAAY,IAAIpD,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAGyE,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAG,2BAA2B;MAChH2I,OAAO,CAACrJ,IAAI,CAAC,8HAA8H,GAAGsI,QAAQ,GAAG,YAAY,CAAC;IACxK,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACA9J,CAAC,CAACF,QAAQ,CAAC,CAAC2K,GAAG,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAACxJ,EAAE,CAAC,OAAO,EAAE,uBAAuB,EAAE,UAASiH,CAAC,EAAE;IACjGA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBD,CAAC,CAACwC,eAAe,CAAC,CAAC,CAAC,CAAC;;IAErB,MAAM/I,OAAO,GAAG3B,CAAC,CAAC,IAAI,CAAC;IACvB,MAAM2K,UAAU,GAAGhJ,OAAO,CAACO,IAAI,CAAC,aAAa,CAAC;IAC9C,MAAMqC,OAAO,GAAG5C,OAAO,CAACO,IAAI,CAAC,UAAU,CAAC;IACxC,MAAMoG,YAAY,GAAG3G,OAAO,CAACM,IAAI,CAAC,CAAC;;IAEnC;IACA,IAAI,CAAC0I,UAAU,IAAI,CAACpG,OAAO,EAAE;MAC3BoE,KAAK,CAAC,qCAAqC,CAAC;MAC5C;IACF;;IAEA;IACAhH,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAAC+J,YAAY,CAAC;;IAEtE;IACAC,gBAAgB,CAACT,UAAU,EAAEpG,OAAO,EAAE,YAAW;MAC/C5C,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACAtI,CAAC,CAACF,QAAQ,CAAC,CAAC2K,GAAG,CAAC,OAAO,EAAE,2BAA2B,CAAC,CAACxJ,EAAE,CAAC,OAAO,EAAE,2BAA2B,EAAE,UAASiH,CAAC,EAAE;IACzGA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;IACpBD,CAAC,CAACwC,eAAe,CAAC,CAAC,CAAC,CAAC;;IAErB,IAAI,CAACW,OAAO,CAAC,+CAA+C,CAAC,EAAE;MAC7D;IACF;IAEA,MAAM1J,OAAO,GAAG3B,CAAC,CAAC,IAAI,CAAC;IACvB,MAAM2K,UAAU,GAAGhJ,OAAO,CAACO,IAAI,CAAC,aAAa,CAAC;IAC9C,MAAMoG,YAAY,GAAG3G,OAAO,CAACM,IAAI,CAAC,CAAC;;IAEnC;IACAN,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAACkK,wBAAwB,CAAC;IAElF,MAAM/G,OAAO,GAAG5C,OAAO,CAACO,IAAI,CAAC,UAAU,CAAC;;IAExC;IACA,IAAI,CAACyI,UAAU,IAAI,CAACpG,OAAO,EAAE;MAC3BoE,KAAK,CAAC,wCAAwC,CAAC;MAC/ChH,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;MAClD;IACF;IAEA,MAAMpG,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAACmK,+BAA+B;MAC5DpG,QAAQ,EAAE/D,oBAAoB,CAACoK,8BAA8B;MAC7DP,WAAW,EAAEN,UAAU;MACvBzD,QAAQ,EAAE3C;IACZ,CAAC;IAEDqB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE3D,IAAI,CAAC;IAEzClC,CAAC,CAACyF,IAAI,CAACC,OAAO,EAAExD,IAAI,EAAE,UAASyD,QAAQ,EAAE;MACvC,IAAIA,QAAQ,CAACG,OAAO,EAAE;QACpB;QACA2F,8BAA8B,CAAC9J,OAAO,CAAC;QACvCgH,KAAK,CAAC,gCAAgC,CAAC;MACzC,CAAC,MAAM;QACL;QACA,MAAM+C,YAAY,GAAG/F,QAAQ,CAACzD,IAAI,IAAI,iBAAiB;QACvDyG,KAAK,CAAC,QAAQ,GAAG+C,YAAY,CAAC;MAChC;IACF,CAAC,CAAC,CAAChF,IAAI,CAAC,UAASC,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAE;MACnC;MACA,IAAI6E,YAAY,GAAG,iBAAiB;MAEpC,IAAI;QACF;QACA,MAAM/F,QAAQ,GAAG0D,IAAI,CAACsC,KAAK,CAAChF,GAAG,CAACiF,YAAY,CAAC;QAC7C,IAAIjG,QAAQ,CAACzD,IAAI,EAAE;UACjBwJ,YAAY,GAAG/F,QAAQ,CAACzD,IAAI;QAC9B;MACF,CAAC,CAAC,OAAOgG,CAAC,EAAE;QACV;QACA,IAAIvB,GAAG,CAACkF,UAAU,EAAE;UAClBH,YAAY,GAAG/E,GAAG,CAACkF,UAAU;QAC/B;MACF;MAEAlD,KAAK,CAAC,QAAQ,GAAG+C,YAAY,CAAC;IAChC,CAAC,CAAC,CAAC1B,MAAM,CAAC,YAAW;MACnBrI,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACAtI,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,0BAA0B,EAAE,UAASiH,CAAC,EAAE;IAC9DA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,MAAMxG,OAAO,GAAG3B,CAAC,CAAC,IAAI,CAAC;IACvB,MAAMsI,YAAY,GAAG3G,OAAO,CAACM,IAAI,CAAC,CAAC;;IAEnC;IACAN,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAAC0K,qBAAqB,CAAC;IAE/EC,oBAAoB,CAAC,CAAC,CAAC/B,MAAM,CAAC,YAAW;MACvC;MACArI,OAAO,CAACsH,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC,CAAC;;EAEF;EACAtI,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,0BAA0B,EAAE,YAAW;IAC7D+K,iBAAiB,CAAC,CAAC;EACrB,CAAC,CAAC;;EAEF;EACAhM,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,yBAAyB,EAAE,UAASiH,CAAC,EAAE;IAC7D,IAAIA,CAAC,CAAC+D,MAAM,KAAK,IAAI,EAAE;MACrBD,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC,CAAC;;EAEF;EACAhM,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,SAAS,EAAE,UAASiH,CAAC,EAAE;IACpC,IAAIA,CAAC,CAACgE,GAAG,KAAK,QAAQ,EAAE;MACtB,IAAI,CAAClM,CAAC,CAAC,yBAAyB,CAAC,CAAC+B,QAAQ,CAAC,QAAQ,CAAC,EAAE;QACpDiK,iBAAiB,CAAC,CAAC;MACrB;MACA,IAAI,CAAChM,CAAC,CAAC,yBAAyB,CAAC,CAAC+B,QAAQ,CAAC,QAAQ,CAAC,EAAE;QACpDoK,iBAAiB,CAAC,CAAC;MACrB;IACF;EACF,CAAC,CAAC;;EAEF;EACAnM,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,0BAA0B,EAAE,YAAW;IAC7DkL,iBAAiB,CAAC,CAAC;EACrB,CAAC,CAAC;EAEFnM,CAAC,CAACF,QAAQ,CAAC,CAACmB,EAAE,CAAC,OAAO,EAAE,yBAAyB,EAAE,UAASiH,CAAC,EAAE;IAC7D,IAAIA,CAAC,CAAC+D,MAAM,KAAK,IAAI,EAAE;MACrBE,iBAAiB,CAAC,CAAC;IACrB;EACF,CAAC,CAAC;EAEF,SAASH,iBAAiBA,CAAA,EAAG;IAC3B,MAAMpB,KAAK,GAAG5K,CAAC,CAAC,yBAAyB,CAAC;IAC1C4K,KAAK,CAAC/I,IAAI,CAAC,oBAAoB,CAAC,CAACxB,WAAW,CAAC,uBAAuB,CAAC,CAAC2B,QAAQ,CAAC,oBAAoB,CAAC;IACpGjB,UAAU,CAAC,MAAM;MACf6J,KAAK,CAAC5I,QAAQ,CAAC,QAAQ,CAAC;IAC1B,CAAC,EAAE,GAAG,CAAC;EACT;EAEA,SAASmK,iBAAiBA,CAAA,EAAG;IAC3B,MAAMvB,KAAK,GAAG5K,CAAC,CAAC,yBAAyB,CAAC;IAC1C4K,KAAK,CAAC/I,IAAI,CAAC,oBAAoB,CAAC,CAACxB,WAAW,CAAC,uBAAuB,CAAC,CAAC2B,QAAQ,CAAC,oBAAoB,CAAC;IACpGjB,UAAU,CAAC,MAAM;MACf6J,KAAK,CAAC5I,QAAQ,CAAC,QAAQ,CAAC;MACxB;MACAhC,CAAC,CAAC,oBAAoB,CAAC,CAACoM,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC;MACvCpM,CAAC,CAAC,2BAA2B,CAAC,CAACwB,IAAI,CAAE;AAC3C;AACA;AACA;AACA,OAAO,CAAC;IACJ,CAAC,EAAE,GAAG,CAAC;EACT;;EAEA;EACA,SAASiK,8BAA8BA,CAAC9J,OAAO,EAAE;IAC/C,MAAM0K,IAAI,GAAG1K,OAAO,CAACyG,OAAO,CAAC,IAAI,CAAC;;IAElC;IACAiE,IAAI,CAAChM,WAAW,CAAC,UAAU,CAAC,CAAC2B,QAAQ,CAAC,wBAAwB,CAAC;;IAE/D;IACA,MAAMsK,YAAY,GAAGD,IAAI,CAACxK,IAAI,CAAC,UAAU,CAAC;IAC1CyK,YAAY,CAACtK,QAAQ,CAAC,4BAA4B,CAAC;IACnDsK,YAAY,CAAClI,MAAM,CAAC,4FAA4F,CAAC;;IAEjH;IACA,MAAMmI,YAAY,GAAGF,IAAI,CAACxK,IAAI,CAAC,UAAU,CAAC;IAC1C,MAAM2K,WAAW,GAAG,IAAI3H,IAAI,CAAC,CAAC,CAAC4H,cAAc,CAAC,OAAO,EAAE;MACrDC,GAAG,EAAE,SAAS;MACdC,KAAK,EAAE,SAAS;MAChBC,IAAI,EAAE,SAAS;MACfC,IAAI,EAAE,SAAS;MACfC,MAAM,EAAE;IACV,CAAC,CAAC;;IAEF;IACA,MAAMC,QAAQ,GAAGR,YAAY,CAACtK,IAAI,CAAC,CAAC,CAAC+K,QAAQ,CAAC,OAAO,CAAC,GAAGT,YAAY,CAACtK,IAAI,CAAC,CAAC,CAAC8C,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK;IACrH,MAAMkI,QAAQ,GAAGV,YAAY,CAACtK,IAAI,CAAC,CAAC,CAAC+K,QAAQ,CAAC,OAAO,CAAC,GAAGT,YAAY,CAACtK,IAAI,CAAC,CAAC,CAAC8C,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAACmI,IAAI,CAAC,CAAC,GAAG,KAAK;IAE9GX,YAAY,CAAC/K,IAAI,CAAE;AACvB;AACA,0CAA0CuL,QAAS;AACnD,0CAA0CE,QAAS;AACnD,gEAAgET,WAAY;AAC5E;AACA,KAAK,CAAC;;IAEF;IACA,MAAMW,YAAY,GAAGd,IAAI,CAACxK,IAAI,CAAC,SAAS,CAAC;IACzC,MAAM8I,UAAU,GAAGhJ,OAAO,CAACO,IAAI,CAAC,aAAa,CAAC;IAC9C,MAAMqC,OAAO,GAAG5C,OAAO,CAACO,IAAI,CAAC,UAAU,CAAC;IAExCiL,YAAY,CAAC3L,IAAI,CAAE;AACvB;AACA;AACA,kDAAkDmJ,UAAW,oBAAmBpG,OAAQ;AACxF;AACA;AACA,KAAK,CAAC;EACJ;;EAEA;EACA,SAAS6G,gBAAgBA,CAACT,UAAU,EAAEpG,OAAO,EAAE6I,QAAQ,EAAE;IACvD,MAAMxC,KAAK,GAAG5K,CAAC,CAAC,yBAAyB,CAAC;IAC1C,MAAMqN,QAAQ,GAAGrN,CAAC,CAAC,oBAAoB,CAAC;IAExC4F,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;MAAE8E,UAAU;MAAEpG;IAAQ,CAAC,CAAC;;IAElE;IACAqG,KAAK,CAAC1I,IAAI,CAAC,qBAAqB,EAAEyI,UAAU,CAAC;IAC7CC,KAAK,CAAC1I,IAAI,CAAC,kBAAkB,EAAEqC,OAAO,CAAC;;IAEvC;IACAqG,KAAK,CAACvK,WAAW,CAAC,QAAQ,CAAC;IAC3BU,UAAU,CAAC,MAAM;MACf6J,KAAK,CAAC/I,IAAI,CAAC,oBAAoB,CAAC,CAACxB,WAAW,CAAC,oBAAoB,CAAC,CAAC2B,QAAQ,CAAC,uBAAuB,CAAC;IACtG,CAAC,EAAE,EAAE,CAAC;;IAEN;IACAqL,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAE,oCAAmCJ,oBAAoB,CAACmM,sBAAuB,MAAK,CAAC;;IAE7G;IACA,MAAMrL,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAACoM,+BAA+B;MAC5DrI,QAAQ,EAAE/D,oBAAoB,CAACqM,8BAA8B;MAC7DxC,WAAW,EAAEN,UAAU;MACvBzD,QAAQ,EAAE3C;IACZ,CAAC;IAEDvE,CAAC,CAACyF,IAAI,CAACC,OAAO,EAAExD,IAAI,EAAE,UAASyD,QAAQ,EAAE;MACvCC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,QAAQ,CAAC;MAChDC,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEF,QAAQ,CAACG,OAAO,CAAC;MAClDF,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,QAAQ,CAACzD,IAAI,CAAC;MAE5C,IAAIyD,QAAQ,CAACG,OAAO,EAAE;QACpB;QACA8E,KAAK,CAAC1I,IAAI,CAAC,SAAS,EAAEyD,QAAQ,CAACzD,IAAI,CAACwL,OAAO,CAAC;;QAE5C;QACAC,mBAAmB,CAAChI,QAAQ,CAACzD,IAAI,CAAC0L,YAAY,EAAEP,QAAQ,CAAC,CAACQ,KAAK,CAAChH,KAAK,IAAI;UACvEjB,OAAO,CAACiB,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;UACrDwG,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAC,mHAAmH,GAAGqF,KAAK,CAACtF,OAAO,GAAG,YAAY,CAAC;QAC5K,CAAC,CAAC;QAEFqE,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEF,QAAQ,CAACzD,IAAI,CAAC;QAC1D0D,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEF,QAAQ,CAACzD,IAAI,CAACwL,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC;MAChF,CAAC,MAAM;QACL9H,OAAO,CAACiB,KAAK,CAAC,sBAAsB,EAAElB,QAAQ,CAACzD,IAAI,CAAC;QACpDmL,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAC,mHAAmH,IAAImE,QAAQ,CAACzD,IAAI,IAAI,eAAe,CAAC,GAAG,YAAY,CAAC;MACjM;MAEA,IAAIkL,QAAQ,EAAEA,QAAQ,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC1G,IAAI,CAAC,UAASC,GAAG,EAAE;MACpBf,OAAO,CAACiB,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;MAC1Cf,OAAO,CAACiB,KAAK,CAAC,SAAS,EAAEF,GAAG,CAACC,MAAM,CAAC;MACpChB,OAAO,CAACiB,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAACiF,YAAY,CAAC;MAEjD,MAAM9B,QAAQ,GAAGnD,GAAG,CAACoD,YAAY,IAAIpD,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAGyE,GAAG,CAACoD,YAAY,CAAC7H,IAAI,GAAG,2BAA2B;MAChHmL,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAC,8HAA8H,GAAGsI,QAAQ,GAAG,YAAY,CAAC;MAEhL,IAAIsD,QAAQ,EAAEA,QAAQ,CAAC,CAAC;IAC1B,CAAC,CAAC;EACJ;;EAEA;EACE;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAIE;EACF,eAAeO,mBAAmBA,CAACG,WAAW,EAAEC,SAAS,EAAE;IACzD,MAAMnD,KAAK,GAAG5K,CAAC,CAAC,yBAAyB,CAAC;IAC1C,MAAMgO,OAAO,GAAGpD,KAAK,CAAC1I,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;;IAEvC0D,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE;MAAEiI,WAAW;MAAEE;IAAQ,CAAC,CAAC;IACzEpI,OAAO,CAACC,GAAG,CAAC,aAAa,EAAE+E,KAAK,CAAC1I,IAAI,CAAC,CAAC,CAAC;IAExC,IAAI8L,OAAO,EAAE;MACXpI,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;;MAEtD;MACA,MAAMoI,eAAe,GAAGjO,CAAC,CAAC,2BAA2B,CAAC;MACtD4F,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEoI,eAAe,CAAC;MAE1DA,eAAe,CAACzM,IAAI,CAAE;AAC5B;AACA;AACA;AACA;AACA,OAAO,CAAC;MAEF,IAAI;QACF;QACAoE,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;QACnD;QACAoI,eAAe,CAACzM,IAAI,CAAE;AAC9B;AACA;AACA;AACA,qBAAqBwM,OAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,SAAS,CAAC;QAEFpI,OAAO,CAACC,GAAG,CAAC,6CAA6C,CAAC;MAC5D,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACdjB,OAAO,CAACiB,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C;QACAqH,2BAA2B,CAACJ,WAAW,EAAEC,SAAS,CAAC;MACrD;IACF,CAAC,MAAM;MACLnI,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;MAC/DqI,2BAA2B,CAACJ,WAAW,EAAEC,SAAS,CAAC;IACrD;EACF;;EAIA;EACA,SAASG,2BAA2BA,CAACJ,WAAW,EAAEC,SAAS,EAAE;IAC3D,IAAI/H,KAAK,CAACC,OAAO,CAAC6H,WAAW,CAAC,IAAIA,WAAW,CAAC1N,MAAM,GAAG,CAAC,EAAE;MACxD,IAAI;QACF;QACA,IAAI+N,SAAS,GAAGL,WAAW,CAAC,CAAC,CAAC;;QAE9B;QACA,IAAI,CAACK,SAAS,CAACC,UAAU,CAAC,aAAa,CAAC,EAAE;UACxCD,SAAS,GAAG,yBAAyB,GAAGA,SAAS;QACnD;;QAEA;QACAJ,SAAS,CAACT,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAE;AACjC;AACA,2CAA2C2M,SAAU;AACrD;AACA;AACA;AACA,SAAS,CAAC;QAEFvI,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;MACpD,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACdjB,OAAO,CAACiB,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5CkH,SAAS,CAACT,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAC,2DAA2D,GAAGqF,KAAK,CAACtF,OAAO,GAAG,MAAM,CAAC;MAC/G;IACF,CAAC,MAAM;MACLqE,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;MAC/CkI,SAAS,CAACT,MAAM,CAAC,CAAC,CAAC9L,IAAI,CAAC,0EAA0E,CAAC;IACrG;EACF;;EAEA;EACA,SAAS0J,qBAAqBA,CAAChJ,IAAI,EAAE;IACnC,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACA,IAAI,IAAI,CAAC8D,KAAK,CAACC,OAAO,CAAC/D,IAAI,CAACA,IAAI,CAAC,IAAIA,IAAI,CAACA,IAAI,CAAC9B,MAAM,KAAK,CAAC,EAAE;MAC9E,OAAQ,qGAAoGgB,oBAAoB,CAACiN,uBAAwB,YAAW;IACtK;IAEA,MAAMC,YAAY,GAAGpM,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC;IACjC,MAAMqM,YAAY,GAAGD,YAAY,CAACC,YAAY,IAAI,EAAE;IAEpD,IAAI/M,IAAI,GAAG,yBAAyB;;IAEpC;IACAA,IAAI,IAAI,6DAA6D;IACrEA,IAAI,IAAI,yEAAyE;IACjFA,IAAI,IAAI,+CAA+C;IACvDA,IAAI,IAAI,oFAAoF,IAAI8M,YAAY,CAACE,cAAc,IAAI,SAAS,CAAC,GAAG,eAAe;IAC3JhN,IAAI,IAAI,qCAAqC,IAAI8M,YAAY,CAACG,kBAAkB,IAAI,KAAK,CAAC,GAAG,QAAQ;IACrG,IAAIH,YAAY,CAACI,WAAW,EAAE;MAC5BlN,IAAI,IAAI,+CAA+C,GAAG8M,YAAY,CAACI,WAAW,GAAG,kEAAkE;IACzJ;IACAlN,IAAI,IAAI,QAAQ;IAChBA,IAAI,IAAI,QAAQ;;IAEhB;IACA,IAAI+M,YAAY,CAACnO,MAAM,GAAG,CAAC,EAAE;MAC3BoB,IAAI,IAAI,kEAAkE;MAC1EA,IAAI,IAAI,qEAAqE;MAC7EA,IAAI,IAAI,kDAAkD;;MAE1D;MACA,MAAMmN,kBAAkB,GAAG,CAAC,GAAGJ,YAAY,CAAC,CAACK,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QAC1D,MAAMC,KAAK,GAAG,IAAIlK,IAAI,CAACgK,CAAC,CAACG,mBAAmB,IAAI,CAAC,CAAC;QAClD,MAAMC,KAAK,GAAG,IAAIpK,IAAI,CAACiK,CAAC,CAACE,mBAAmB,IAAI,CAAC,CAAC;QAClD,OAAOC,KAAK,GAAGF,KAAK;MACtB,CAAC,CAAC;MAEFJ,kBAAkB,CAACrI,OAAO,CAAC,UAAS4I,WAAW,EAAEnH,KAAK,EAAE;QACtD,MAAMoH,QAAQ,GAAGpH,KAAK,KAAK,CAAC;QAC5BvG,IAAI,IAAI,cAAc,IAAI2N,QAAQ,GAAG,qCAAqC,GAAG,iCAAiC,CAAC,GAAG,wBAAwB;QAC1I3N,IAAI,IAAI,yCAAyC,IAAI0N,WAAW,CAACA,WAAW,IAAI,KAAK,CAAC,GAAG,QAAQ;QACjG,IAAIA,WAAW,CAAC7H,QAAQ,EAAE;UACxB7F,IAAI,IAAI,gCAAgC,GAAG0N,WAAW,CAAC7H,QAAQ,GAAG,QAAQ;QAC5E;QACA,IAAI6H,WAAW,CAACF,mBAAmB,EAAE;UACnCxN,IAAI,IAAI,gCAAgC,GAAG0N,WAAW,CAACF,mBAAmB,GAAG,QAAQ;QACvF;QACAxN,IAAI,IAAI,QAAQ;MAClB,CAAC,CAAC;MAEFA,IAAI,IAAI,QAAQ;MAChBA,IAAI,IAAI,QAAQ;IAClB,CAAC,MAAM;MACLA,IAAI,IAAI,6DAA6D;MACrEA,IAAI,IAAI,wEAAwE;MAChFA,IAAI,IAAI,QAAQ;IAClB;IAEAA,IAAI,IAAI,QAAQ;IAChB,OAAOA,IAAI;EACb;EAEA,SAASe,yBAAyBA,CAACJ,eAAe,EAAEE,YAAY,EAAE;IAChE,MAAM+M,aAAa,GAAGjN,eAAe,CAACN,IAAI,CAAC,aAAa,CAAC;IACzD,MAAMwN,aAAa,GAAGD,aAAa,CAACvN,IAAI,CAAC,oBAAoB,CAAC;IAC9D,MAAMyN,cAAc,GAAGF,aAAa,CAACvN,IAAI,CAAC,oBAAoB,CAAC;;IAE/D;IACAyN,cAAc,CAACrG,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAACmO,qBAAqB,CAAC;;IAEvF;IACAH,aAAa,CAAC/O,WAAW,CAAC,QAAQ,CAAC;IACnCU,UAAU,CAAC,MAAM;MACfqO,aAAa,CAACpN,QAAQ,CAAC,MAAM,CAAC;MAC9BqN,aAAa,CAAChP,WAAW,CAAC,oBAAoB,CAAC,CAAC2B,QAAQ,CAAC,uBAAuB,CAAC;IACnF,CAAC,EAAE,EAAE,CAAC;;IAEN;IACA,MAAMwN,iBAAiB,GAAGJ,aAAa,CAACvN,IAAI,CAAC,0EAA0E,CAAC;IACxH,MAAM4N,cAAc,GAAGD,iBAAiB,CAACxH,KAAK,CAAC,CAAC;IAChD,MAAM0H,aAAa,GAAGF,iBAAiB,CAACG,IAAI,CAAC,CAAC;IAE9CF,cAAc,CAACG,KAAK,CAAC,CAAC;;IAEtB;IACAR,aAAa,CAACnO,EAAE,CAAC,SAAS,EAAE,UAASiH,CAAC,EAAE;MACtC,IAAIA,CAAC,CAACgE,GAAG,KAAK,KAAK,EAAE;QACnB,IAAIhE,CAAC,CAAC2H,QAAQ,EAAE;UACd,IAAI/P,QAAQ,CAACgQ,aAAa,KAAKL,cAAc,CAAC,CAAC,CAAC,EAAE;YAChDvH,CAAC,CAACC,cAAc,CAAC,CAAC;YAClBuH,aAAa,CAACE,KAAK,CAAC,CAAC;UACvB;QACF,CAAC,MAAM;UACL,IAAI9P,QAAQ,CAACgQ,aAAa,KAAKJ,aAAa,CAAC,CAAC,CAAC,EAAE;YAC/CxH,CAAC,CAACC,cAAc,CAAC,CAAC;YAClBsH,cAAc,CAACG,KAAK,CAAC,CAAC;UACxB;QACF;MACF,CAAC,MAAM,IAAI1H,CAAC,CAACgE,GAAG,KAAK,QAAQ,EAAE;QAC7B6D,UAAU,CAAC,CAAC;MACd;IACF,CAAC,CAAC;IAEF,SAASA,UAAUA,CAAA,EAAG;MACpBV,aAAa,CAAChP,WAAW,CAAC,uBAAuB,CAAC,CAAC2B,QAAQ,CAAC,oBAAoB,CAAC;MACjFjB,UAAU,CAAC,MAAM;QACfqO,aAAa,CAAC/O,WAAW,CAAC,MAAM,CAAC,CAAC2B,QAAQ,CAAC,QAAQ,CAAC;QACpDoN,aAAa,CAAC3E,GAAG,CAAC,SAAS,CAAC;MAC9B,CAAC,EAAE,GAAG,CAAC;IACT;;IAEA;IACA2E,aAAa,CAACvN,IAAI,CAAC,oBAAoB,CAAC,CAAC4I,GAAG,CAAC,OAAO,CAAC,CAACxJ,EAAE,CAAC,OAAO,EAAE,YAAW;MAC3E,MAAMqO,cAAc,GAAGtP,CAAC,CAAC,IAAI,CAAC;MAC9B,MAAMsI,YAAY,GAAGgH,cAAc,CAACrN,IAAI,CAAC,CAAC;MAE1CqN,cAAc,CAACrG,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAChH,IAAI,CAACb,oBAAoB,CAAC4O,aAAa,CAAC;MAE9EhQ,CAAC,CAACyF,IAAI,CACJC,OAAO,EACP;QACER,MAAM,EAAE9D,oBAAoB,CAAC6O,2BAA2B;QACxD9K,QAAQ,EAAE/D,oBAAoB,CAAC8O,0BAA0B;QACzDhJ,QAAQ,EAAElH,CAAC,CAAC,eAAe,CAAC,CAACyC,GAAG,CAAC,CAAC;QAClC0N,OAAO,EAAE9N,YAAY,CAACH,IAAI,CAAC,SAAS;MACtC,CAAC,EACD,YAAY;QACVG,YAAY,CAACf,OAAO,CAAC,GAAG,EAAE,YAAW;UACnCtB,CAAC,CAAC,IAAI,CAAC,CAACkE,MAAM,CAAC,CAAC;UAChB;UACA,MAAMkM,kBAAkB,GAAGjO,eAAe,CAACN,IAAI,CAAC,UAAU,CAAC;UAC3D,IAAIuO,kBAAkB,CAAChQ,MAAM,KAAK,CAAC,EAAE;YACnCiH,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;UACrB;QACF,CAAC,CAAC;QACFyI,UAAU,CAAC,CAAC;MACd,CACF,CAAC,CAACrJ,IAAI,CAAC,YAAY;QACjB;QACA4I,cAAc,CAACrG,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAChH,IAAI,CAACqG,YAAY,CAAC;QACzDyH,UAAU,CAAC,CAAC;QACZ;QACApH,KAAK,CAACvH,oBAAoB,CAACiP,uBAAuB,CAAC;MACrD,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACAjB,aAAa,CAACvN,IAAI,CAAC,qCAAqC,CAAC,CAAC4I,GAAG,CAAC,OAAO,CAAC,CAACxJ,EAAE,CAAC,OAAO,EAAE,YAAW;MAC5F8O,UAAU,CAAC,CAAC;IACd,CAAC,CAAC;;IAEF;IACAX,aAAa,CAACnO,EAAE,CAAC,OAAO,EAAE,UAASiH,CAAC,EAAE;MACpC,IAAIA,CAAC,CAAC+D,MAAM,KAAKmD,aAAa,CAAC,CAAC,CAAC,EAAE;QACjCW,UAAU,CAAC,CAAC;MACd;IACF,CAAC,CAAC;EACJ;EAEA,SAASO,eAAeA,CAAA,EAAG;IACvB,IAAIC,OAAO,GAAG,IAAI1L,IAAI,CAAC,sBAAsB,CAAC,CAAC2L,OAAO,CAAC,CAAC,CAAC,CAAC;IAC1D,IAAIvL,GAAG,GAAG,IAAIJ,IAAI,CAAC,CAAC,CAAC2L,OAAO,CAAC,CAAC,CAAC,CAAC;IAChC,IAAIC,QAAQ,GAAGF,OAAO,GAAGtL,GAAG,CAAC,CAAC;;IAE9B,IAAIyL,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IACvD,IAAII,KAAK,GAAGF,IAAI,CAACC,KAAK,CAAEH,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,IAAK,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;IAC7E,IAAIK,OAAO,GAAGH,IAAI,CAACC,KAAK,CAAEH,QAAQ,IAAI,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,IAAK,IAAI,GAAG,EAAE,CAAC,CAAC;IACrE,IAAIM,OAAO,GAAGJ,IAAI,CAACC,KAAK,CAAEH,QAAQ,IAAI,IAAI,GAAG,EAAE,CAAC,GAAI,IAAI,CAAC;;IAEzD;IACAzQ,CAAC,CAAC,OAAO,CAAC,CAACiC,IAAI,CAACyO,IAAI,CAAC;IACrB1Q,CAAC,CAAC,QAAQ,CAAC,CAACiC,IAAI,CAAC4O,KAAK,CAAC;IACvB7Q,CAAC,CAAC,UAAU,CAAC,CAACiC,IAAI,CAAC6O,OAAO,CAAC;IAC3B9Q,CAAC,CAAC,UAAU,CAAC,CAACiC,IAAI,CAAC8O,OAAO,CAAC;IAE3B,IAAIN,QAAQ,GAAG,CAAC,EAAE;MACdtN,aAAa,CAAC6N,KAAK,CAAC;MACpBhR,CAAC,CAAC,YAAY,CAAC,CAACwB,IAAI,CAACJ,oBAAoB,CAAC6P,cAAc,CAAC;IAC7D;EACJ;EAEAX,eAAe,CAAC,CAAC,CAAC,CAAC;EACnB,IAAIU,KAAK,GAAG5N,WAAW,CAACkN,eAAe,EAAE,IAAI,CAAC,CAAC,CAAC;;EAEhD,MAAMY,kBAAkB,GAAGlR,CAAC,CAAC,sCAAsC,CAAC;EAErEA,CAAC,CAAC,gBAAgB,CAAC,CAACiB,EAAE,CAAC,OAAO,EAAE,YAAY;IAC3CjB,CAAC,CAAC,wBAAwB,CAAC,CAACc,IAAI,CAAC,CAAC;EACnC,CAAC,CAAC;EAEFqQ,6BAA6B,CAACD,kBAAkB,CAACzO,GAAG,CAAC,CAAC,CAAC;EAEvDyO,kBAAkB,CAACjQ,EAAE,CAAC,QAAQ,EAAE,YAAY;IAC3C,IAAImQ,YAAY,GAAGpR,CAAC,CAAC,IAAI,CAAC,CAACyC,GAAG,CAAC,CAAC;IAChC0O,6BAA6B,CAACC,YAAY,CAAC;EAC5C,CAAC,CAAC;EAEF,SAASD,6BAA6BA,CAACC,YAAY,EAAE;IACpD,IAAIA,YAAY,IAAI,QAAQ,EAAE;MAC7BpR,CAAC,CAAC,+BAA+B,CAAC,CAACK,WAAW,CAAC,0BAA0B,CAAC;MAC1EL,CAAC,CAAC,gCAAgC,CAAC,CAACgC,QAAQ,CAAC,0BAA0B,CAAC;MACxEhC,CAAC,CAAC,gCAAgC,CAAC,CAACgC,QAAQ,CAAC,0BAA0B,CAAC;IACzE,CAAC,MAAM,IAAIoP,YAAY,IAAI,SAAS,EAAE;MACrCpR,CAAC,CAAC,+BAA+B,CAAC,CAACgC,QAAQ,CAAC,0BAA0B,CAAC;MACvEhC,CAAC,CAAC,gCAAgC,CAAC,CAACK,WAAW,CAAC,0BAA0B,CAAC;MAC3EL,CAAC,CAAC,gCAAgC,CAAC,CAACK,WAAW,CAAC,0BAA0B,CAAC;IAC5E;EACD;;EAEC;EACA,SAAS0L,oBAAoBA,CAAA,EAAG;IAC9B,MAAMsF,cAAc,GAAGrR,CAAC,CAAC,oBAAoB,CAAC;;IAE9C;IACAqR,cAAc,CAACpP,IAAI,CAACb,oBAAoB,CAAC+J,YAAY,CAAC;IAEtD,MAAMjJ,IAAI,GAAG;MACXgD,MAAM,EAAE9D,oBAAoB,CAACkQ,4BAA4B;MACzDnM,QAAQ,EAAE/D,oBAAoB,CAACmQ;IACjC,CAAC;IAED,OAAOvR,CAAC,CAACyF,IAAI,CAACC,OAAO,EAAExD,IAAI,EAAE,UAASyD,QAAQ,EAAE;MAC9C,IAAIA,QAAQ,CAACG,OAAO,IAAIH,QAAQ,CAACzD,IAAI,CAACsP,OAAO,IAAI7L,QAAQ,CAACzD,IAAI,CAACsP,OAAO,CAACC,SAAS,EAAE;QAChF;QACAJ,cAAc,CAAC7P,IAAI,CAACmE,QAAQ,CAACzD,IAAI,CAACsP,OAAO,CAACC,SAAS,CAAC;MACtD,CAAC,MAAM;QACLJ,cAAc,CAACpP,IAAI,CAACb,oBAAoB,CAACsQ,qBAAqB,CAAC;QAC/D9L,OAAO,CAACiB,KAAK,CAAC,gBAAgB,EAAElB,QAAQ,CAACzD,IAAI,CAAC;MAChD;IACF,CAAC,CAAC,CAACwE,IAAI,CAAC,UAASC,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAE;MACnCwK,cAAc,CAACpP,IAAI,CAACb,oBAAoB,CAACuQ,gBAAgB,CAAC;MAC1D/L,OAAO,CAACiB,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;EACE,SAAS+K,sBAAsBA,CAAA,EAAG;IAChC,MAAMC,gBAAgB,GAAG7R,CAAC,CAAC,qBAAqB,CAAC;IAEjD,IAAI,CAAC6R,gBAAgB,CAACzR,MAAM,EAAE;MAC5B,OAAO,CAAC;IACV;;IAEA;IACA,MAAM0R,QAAQ,GAAG,qBAAqB;IACtC,MAAMC,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IACxC,MAAMC,MAAM,GAAGvR,YAAY,CAACC,OAAO,CAACoR,QAAQ,CAAC;IAC7C,MAAMG,SAAS,GAAGxR,YAAY,CAACC,OAAO,CAACoR,QAAQ,GAAG,OAAO,CAAC;IAE1D,IAAIE,MAAM,IAAIC,SAAS,EAAE;MACvB,MAAMC,GAAG,GAAGrN,IAAI,CAACI,GAAG,CAAC,CAAC,GAAGkN,QAAQ,CAACF,SAAS,CAAC;MAC5C,IAAIC,GAAG,GAAGH,WAAW,EAAE;QACrB;QACA,IAAI;UACF,MAAMK,UAAU,GAAG/I,IAAI,CAACsC,KAAK,CAACqG,MAAM,CAAC;UACrCK,yBAAyB,CAACD,UAAU,CAAC;UACrC;QACF,CAAC,CAAC,OAAOlK,CAAC,EAAE;UACV;QAAA;MAEJ;IACF;;IAEA;IACA,MAAMhG,IAAI,GAAG;MACXgD,MAAM,EAAE,yBAAyB;MACjCC,QAAQ,EAAE/D,oBAAoB,CAACgI;IACjC,CAAC;IAEDpJ,CAAC,CAACyF,IAAI,CAACrE,oBAAoB,CAACkR,QAAQ,EAAEpQ,IAAI,EAAE,UAASyD,QAAQ,EAAE;MAC7D,IAAIA,QAAQ,CAACG,OAAO,IAAIH,QAAQ,CAACzD,IAAI,IAAIyD,QAAQ,CAACzD,IAAI,CAACkQ,UAAU,EAAE;QACjE,MAAMA,UAAU,GAAGzM,QAAQ,CAACzD,IAAI,CAACkQ,UAAU;;QAE3C;QACA3R,YAAY,CAACS,OAAO,CAAC4Q,QAAQ,EAAEzI,IAAI,CAACC,SAAS,CAAC8I,UAAU,CAAC,CAAC;QAC1D3R,YAAY,CAACS,OAAO,CAAC4Q,QAAQ,GAAG,OAAO,EAAEjN,IAAI,CAACI,GAAG,CAAC,CAAC,CAACsN,QAAQ,CAAC,CAAC,CAAC;;QAE/D;QACAF,yBAAyB,CAACD,UAAU,CAAC;MACvC,CAAC,MAAM;QACLP,gBAAgB,CAACrQ,IAAI,CAAC,6CAA6C,CAAC;MACtE;IACF,CAAC,CAAC,CAACkF,IAAI,CAAC,YAAW;MACjBmL,gBAAgB,CAACrQ,IAAI,CAAC,6CAA6C,CAAC;IACtE,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;EACE,SAAS6Q,yBAAyBA,CAACD,UAAU,EAAE;IAC7C,MAAMP,gBAAgB,GAAG7R,CAAC,CAAC,qBAAqB,CAAC;IACjD,MAAMwH,UAAU,GAAGxH,CAAC,CAAC,+BAA+B,CAAC;IAErD6R,gBAAgB,CAACpK,KAAK,CAAC,CAAC;IAExB,IAAI,CAAC2K,UAAU,IAAIA,UAAU,CAAChS,MAAM,KAAK,CAAC,EAAE;MAC1CyR,gBAAgB,CAACrQ,IAAI,CAAC,oDAAoD,CAAC;MAC3E;IACF;;IAEA;IACA,IAAI4Q,UAAU,CAAChS,MAAM,KAAK,CAAC,EAAE;MAC3ByR,gBAAgB,CAACzN,MAAM,CACrBpE,CAAC,CAAC,mBAAmB,CAAC,CAACyC,GAAG,CAAC2P,UAAU,CAAC,CAAC,CAAC,CAACI,EAAE,CAAC,CAACvQ,IAAI,CAACmQ,UAAU,CAAC,CAAC,CAAC,CAACK,KAAK,CAAC,CAACrG,IAAI,CAAC,UAAU,EAAE,UAAU,CACpG,CAAC;MACD5E,UAAU,CAAC1G,IAAI,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC,MAAM;MACL;MACA+Q,gBAAgB,CAACzN,MAAM,CAAC,8CAA8C,CAAC;MAEvEpE,CAAC,CAAC8H,IAAI,CAACsK,UAAU,EAAE,UAASrK,KAAK,EAAE2K,SAAS,EAAE;QAC5Cb,gBAAgB,CAACzN,MAAM,CACrBpE,CAAC,CAAC,mBAAmB,CAAC,CACnByC,GAAG,CAACiQ,SAAS,CAACF,EAAE,CAAC,CACjBvQ,IAAI,CAACyQ,SAAS,CAACD,KAAK,CAAC,CACrBvQ,IAAI,CAAC,WAAW,EAAEwQ,SAAS,CAChC,CAAC;MACH,CAAC,CAAC;MAEFlL,UAAU,CAAClH,IAAI,CAAC,CAAC,CAAC,CAAC;IACrB;EACF;AAEF,CAAC,CAAC;;;;;;;;;;;ACx7CF;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://hezarfen-for-woocommerce/./assets/admin/order-edit/src/main.js","webpack://hezarfen-for-woocommerce/./assets/admin/order-edit/src/style.css","webpack://hezarfen-for-woocommerce/webpack/bootstrap","webpack://hezarfen-for-woocommerce/webpack/runtime/chunk loaded","webpack://hezarfen-for-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://hezarfen-for-woocommerce/webpack/runtime/make namespace object","webpack://hezarfen-for-woocommerce/webpack/runtime/jsonp chunk loading","webpack://hezarfen-for-woocommerce/webpack/before-startup","webpack://hezarfen-for-woocommerce/webpack/startup","webpack://hezarfen-for-woocommerce/webpack/after-startup"],"sourcesContent":["import './style.css';\n\njQuery(document).ready(($)=>{\n  // Handle non-pro interface - show manual tracking content by default\n  function initializeInterface() {\n    const $tabContainer = $('#default-tab');\n    const $manualContent = $('#hezarfen-lite');\n    \n    // If no tabs exist (pro not available), show manual content directly\n    if ($tabContainer.length === 0) {\n      $manualContent.removeClass('hidden').show();\n    }\n  }\n  \n  // Initialize the interface\n  initializeInterface();\n  // Check if feedback should be shown\n  function shouldShowFeedback() {\n    const feedbackDismissed = localStorage.getItem('hezarfen_feedback_dismissed');\n    const reviewClicked = localStorage.getItem('hezarfen_review_clicked');\n    return !feedbackDismissed && !reviewClicked;\n  }\n\n  // Initialize feedback request\n  function initFeedbackRequest() {\n    const $feedbackRequest = $('#hezarfen-feedback-request');\n    \n    if (!shouldShowFeedback()) {\n      $feedbackRequest.hide();\n      return;\n    }\n\n    // Show feedback after a short delay to not interrupt user flow\n    setTimeout(() => {\n      $feedbackRequest.fadeIn(300);\n    }, 1000);\n\n    // Handle review link click\n    $('#hezarfen-review-positive').on('click', function() {\n      // Track that user clicked review link\n      localStorage.setItem('hezarfen_review_clicked', 'true');\n      \n      // Show thank you message\n      showThankYouMessage(hezarfen_mst_backend.thank_you_message);\n      \n      // Hide after 3 seconds\n      setTimeout(() => {\n        $feedbackRequest.fadeOut(300);\n      }, 3000);\n    });\n\n    // Handle dismiss button\n    $('#hezarfen-feedback-dismiss').on('click', function() {\n      localStorage.setItem('hezarfen_feedback_dismissed', 'true');\n      $feedbackRequest.fadeOut(300);\n    });\n\n    // Handle close button\n    $('#hezarfen-feedback-close').on('click', function() {\n      $feedbackRequest.fadeOut(300);\n    });\n  }\n\n  // Show thank you message\n  function showThankYouMessage(message) {\n    const $feedbackRequest = $('#hezarfen-feedback-request');\n    \n    $feedbackRequest.html(`\n      <div class=\"flex items-center space-x-3\">\n        <div class=\"flex-shrink-0\">\n          <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n        </div>\n        <div class=\"flex-1\">\n          <p class=\"text-sm text-green-700 font-medium\">\n            ${message}\n          </p>\n        </div>\n      </div>\n    `);\n  }\n\n  // Initialize feedback request\n  initFeedbackRequest();\n\n  $('#hezarfen-lite .h-expand').click(function () {\n    var $content = $('#hezarfen-lite #shipping-companies');\n\n    var $button = $(this);\n    const $buttonText = $(this).find('span');\n    $button.find('svg').toggleClass('rotate-180');\n\n    if ($content.hasClass('max-h-24')) {\n      $content.removeClass('max-h-24').addClass('max-h-[1000px]');\n      $buttonText.text($button.data('show-less-label'));\n    } else {\n      $content.removeClass('max-h-[1000px]').addClass('max-h-24');\n      $buttonText.text($button.data('show-more-label'));\n    }\n  });\n\n  const metabox_wrapper = $('#hezarfen-lite');\n  const remove_buttons = metabox_wrapper.find('.remove-shipment-data');\n\n  remove_buttons.on('click', function () {\n    let shipment_row = $(this).parents('tr');\n\n    create_confirmation_modal(\n      metabox_wrapper,\n      shipment_row\n    );\n  });\n\n  // Handle courier selection changes\n  metabox_wrapper.find('input[name=\"courier-company-select\"]').on('change', function() {\n    const selectedCourier = $(this).val();\n    const standardFields = $('#standard-tracking-fields');\n    const hepsijetFields = $('#hepsijet-integration-fields');\n    const standardButton = $('#add-to-tracking-list');\n    const hepsijetButton = $('#create-hepsijet-shipment');\n\n    if (selectedCourier === 'hepsijet-entegrasyon') {\n      // Show Hepsijet integration fields\n      standardFields.addClass('hidden');\n      hepsijetFields.removeClass('hidden');\n      standardButton.addClass('hidden');\n      // Hepsijet rotation continues automatically\n      // Always show hepsijet button when HepsiJet is selected\n      if (hepsijetButton.length > 0) {\n        hepsijetButton.removeClass('hidden');\n      }\n      \n      // Reset conditional fields when showing Hepsijet fields\n      $('#hepsijet-delivery-slot-container').addClass('hidden');\n      $('#hepsijet-return-date-container').addClass('hidden');\n    } else if (selectedCourier) {\n      // Show standard tracking fields for any other selected courier\n      standardFields.removeClass('hidden');\n      hepsijetFields.addClass('hidden');\n      standardButton.removeClass('hidden');\n      // Hepsijet rotation continues automatically\n      // Only hide hepsijet button if it exists\n      if (hepsijetButton.length > 0) {\n        hepsijetButton.addClass('hidden');\n      }\n    } else {\n      // No courier selected - hide all tracking fields\n      standardFields.addClass('hidden');\n      hepsijetFields.addClass('hidden');\n      standardButton.addClass('hidden');\n      // Hepsijet rotation continues automatically\n      if (hepsijetButton.length > 0) {\n        hepsijetButton.addClass('hidden');\n      }\n    }\n  });\n  \n  // Initialize: hide all tracking fields since no courier is selected by default\n  const standardFields = $('#standard-tracking-fields');\n  const hepsijetFields = $('#hepsijet-integration-fields');\n  const standardButton = $('#add-to-tracking-list');\n  const hepsijetButton = $('#create-hepsijet-shipment');\n  \n  // Hide all fields and buttons by default\n  standardFields.addClass('hidden');\n  hepsijetFields.addClass('hidden');\n  standardButton.addClass('hidden');\n  if (hepsijetButton.length > 0) {\n    hepsijetButton.addClass('hidden');\n  }\n  \n  // Hepsijet Rotating Info Functions\n  let hepsijetRotationInterval = null;\n\n  function startHepsijetRotation() {\n    const rotatingContainer = $('#hepsijet-rotating-info');\n    if (rotatingContainer.length === 0) return;\n\n    const items = rotatingContainer.find('.rotating-item');\n    if (items.length === 0) return;\n\n    let currentIndex = 0;\n    \n    // Clear any existing interval\n    if (hepsijetRotationInterval) {\n      clearInterval(hepsijetRotationInterval);\n    }\n\n    // Start rotation\n    hepsijetRotationInterval = setInterval(function() {\n      const currentItem = items.eq(currentIndex);\n      const nextIndex = (currentIndex + 1) % items.length;\n      const nextItem = items.eq(nextIndex);\n\n      // Hide current item and show next\n      currentItem.removeClass('active');\n      nextItem.addClass('active');\n      currentIndex = nextIndex;\n      \n    }, 1250); // Change every 2 seconds\n  }\n\n  function stopHepsijetRotation() {\n    if (hepsijetRotationInterval) {\n      clearInterval(hepsijetRotationInterval);\n      hepsijetRotationInterval = null;\n    }\n    \n    // Reset to first item\n    const rotatingContainer = $('#hepsijet-rotating-info');\n    if (rotatingContainer.length > 0) {\n      const items = rotatingContainer.find('.rotating-item');\n      items.removeClass('active');\n      items.eq(0).addClass('active');\n    }\n  }\n\n  // Start Hepsijet rotation automatically on page load\n  startHepsijetRotation();\n  \n  // Handle help button toggle\n  metabox_wrapper.find('#hepsijet-help-toggle').on('click', function() {\n    const helpContent = $('#hepsijet-help-content');\n    const button = $(this);\n    \n    if (helpContent.hasClass('hidden')) {\n      helpContent.removeClass('hidden');\n      button.html('<svg class=\"w-4 h-4 inline-block mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg>Kapat');\n    } else {\n      helpContent.addClass('hidden');\n      button.html('<svg class=\"w-4 h-4 inline-block mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>YardÄ±m');\n    }\n  });\n\n  // Handle delivery type selection\n  metabox_wrapper.find('input[name=\"hepsijet-delivery-type\"]').on('change', function() {\n    const selectedType = $(this).val();\n    const deliverySlotContainer = $('#hepsijet-delivery-slot-container');\n    const returnDateContainer = $('#hepsijet-return-date-container');\n    \n    // Hide all conditional containers first\n    deliverySlotContainer.addClass('hidden');\n    returnDateContainer.addClass('hidden');\n    \n    // Show relevant container based on selection\n    if (selectedType === 'sameday' || selectedType === 'nextday') {\n      deliverySlotContainer.removeClass('hidden');\n    } else if (selectedType === 'returned') {\n      returnDateContainer.removeClass('hidden');\n      loadReturnDates();\n    }\n  });\n  \n  // Show notification function\n  function showNotification(message, type = 'info') {\n    // Remove any existing notifications\n    $('.hez-notification').remove();\n    \n    // Create notification element\n    const notification = $(`\n      <div class=\"hez-notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-md transform transition-all duration-300 translate-x-full\">\n        <div class=\"flex items-center\">\n          <div class=\"flex-shrink-0\">\n            ${type === 'success' ? '<svg class=\"w-5 h-5 text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\"></path></svg>' : \n              type === 'error' ? '<svg class=\"w-5 h-5 text-red-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\"></path></svg>' :\n              '<svg class=\"w-5 h-5 text-blue-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"></path></svg>'}\n          </div>\n          <div class=\"ml-3\">\n            <p class=\"text-sm font-medium text-gray-900\">${message}</p>\n          </div>\n          <div class=\"ml-auto pl-3\">\n            <button class=\"hez-notification-close inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600\">\n              <svg class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    `);\n    \n    // Add to body\n    $('body').append(notification);\n    \n    // Animate in\n    setTimeout(() => {\n      notification.removeClass('translate-x-full');\n    }, 100);\n    \n    // Auto-hide after 5 seconds\n    setTimeout(() => {\n      notification.addClass('translate-x-full');\n      setTimeout(() => {\n        notification.remove();\n      }, 300);\n    }, 5000);\n    \n    // Handle close button\n    notification.find('.hez-notification-close').on('click', function() {\n      notification.addClass('translate-x-full');\n      setTimeout(() => {\n        notification.remove();\n      }, 300);\n    });\n  }\n\n  // Load available return dates from API\n  function loadReturnDates() {\n    const returnDateSelect = $('#hepsijet-return-date');\n        returnDateSelect.html(`<option value=\"\">${hezarfen_mst_backend.loading_available_dates}</option>`);\n    \n    // Get order shipping city and district\n    const orderId = $('#create-hepsijet-shipment').data('order_id');\n    \n    // Get shipping city and district from WooCommerce order edit screen shipping metabox\n    const shippingDistrict = $('#_shipping_city').val() || 'Istanbul';\n    \n    // Get human-readable district name from the shipping state field display\n    let shippingCity = '';\n    const shippingStateField = $('#_shipping_state');\n    if (shippingStateField.length) {\n      // Try to get the selected option text (human-readable name)\n      const selectedOption = shippingStateField.find('option:selected');\n      if (selectedOption.length && selectedOption.text()) {\n        shippingCity = selectedOption.text();\n      } else {\n        // Fallback: try to get from the field's display value\n        shippingCity = shippingStateField.val() ;\n      }\n    }\n    \n    const startDate = new Date().toISOString().split('T')[0]; // Today\n    const endDate = new Date(Date.now() + 10 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]; // 10 days later\n    \n    const data = {\n      action: 'hezarfen_mst_get_return_dates',\n      _wpnonce: hezarfen_mst_backend.get_return_dates_nonce,\n      start_date: startDate,\n      end_date: endDate,\n      city: shippingCity,\n      district: shippingDistrict\n    };\n    \n    $.post(ajaxurl, data, function(response) {\n      console.log('Return dates API response:', response);\n\n      if (response.success && response.data) {\n        console.log('Response data:', response.data);\n\n        // Check if response.data is an object with regions as keys\n        const dates = response.data.dates || response.data;\n\n        if (typeof dates === 'object' && !Array.isArray(dates)) {\n          // Response is in format: { \"SARIYER\": [\"2025-12-23\", ...], \"ZEKERÄ°YAKÃY\": [...] }\n          let options = '<option value=\"\">Select return date</option>';\n          let hasAnyDates = false;\n\n          Object.keys(dates).forEach(function(region) {\n            if (Array.isArray(dates[region]) && dates[region].length > 0) {\n              hasAnyDates = true;\n              dates[region].forEach(function(date) {\n                options += `<option value=\"${date}\">${date} - ${region}</option>`;\n              });\n            }\n          });\n\n          if (hasAnyDates) {\n            returnDateSelect.html(options);\n          } else {\n            showNotification('MÃ¼sait tarih bulunamadÄ±', 'info');\n            returnDateSelect.html('<option value=\"\">MÃ¼sait tarih bulunamadÄ±</option>');\n          }\n        } else if (Array.isArray(dates) && dates.length > 0) {\n          // Response is a simple array of dates\n          let options = '<option value=\"\">Select return date</option>';\n          dates.forEach(function(date) {\n            options += `<option value=\"${date}\">${date}</option>`;\n          });\n          returnDateSelect.html(options);\n\n          if (response.data.message) {\n            console.log('Return dates loaded:', response.data.message);\n          }\n        } else {\n          // No dates available\n          const message = response.data.message || 'MÃ¼sait tarih bulunamadÄ±';\n          console.log('Setting message in dropdown:', message);\n          showNotification(message, 'info');\n          returnDateSelect.html('<option value=\"\">MÃ¼sait tarih bulunamadÄ±</option>');\n          console.log('No return dates available:', message);\n        }\n      } else {\n        console.log('Response not successful or missing data:', response);\n        returnDateSelect.html(`<option value=\"\">${hezarfen_mst_backend.error_loading_dates}</option>`);\n      }\n    }).fail(function(xhr, status, error) {\n      console.error('Failed to load return dates:', {xhr, status, error});\n      returnDateSelect.html(`<option value=\"\">${hezarfen_mst_backend.error_loading_dates}</option>`);\n    });\n  }\n\n  const addToTrackList = metabox_wrapper.find('#add-to-tracking-list');\n\n  addToTrackList.on('click', function() {\n    const form = $(this).parents('#hezarfen-lite');\n\n    const data = {\n      action: hezarfen_mst_backend.new_shipment_data_action,\n      _wpnonce: hezarfen_mst_backend.new_shipment_data_nonce,\n      order_id: $(this).data('order_id')\n    };\n\n    data[hezarfen_mst_backend.new_shipment_courier_html_name] = form.find('input[name=\"courier-company-select\"]:checked').val();\n    data[hezarfen_mst_backend.new_shipment_tracking_num_html_name] = form.find('#tracking-num-input').val();\n\n    $.post(\n      ajaxurl,\n      data,\n      function () {\n        location.reload();\n      }\n    ).fail(function () {\n    });\n  });\n\n  // Initialize Hepsijet packages system\n  function initHepsijetPackages() {\n    const $container = $('#hepsijet-packages-container');\n    \n    // Clear container\n    $container.empty();\n    \n    // Add initial package\n    addHepsijetPackage();\n  }\n\n  // Add a new package input\n  function addHepsijetPackage() {\n    const $container = $('#hepsijet-packages-container');\n    const packageIndex = $container.find('.hepsijet-package-item').length;\n    \n    const packageHtml = `\n      <div class=\"hepsijet-package-item flex items-center gap-2 p-2 bg-gray-50 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600\">\n        <span class=\"text-sm font-medium text-gray-700 dark:text-gray-300 min-w-[60px]\">Koli ${packageIndex + 1}:</span>\n        <div class=\"flex-1\">\n          <input type=\"number\" \n                 name=\"hezarfen_hepsijet_package_desi[]\"\n                 class=\"hepsijet-package-desi shadow-sm bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2 dark:bg-gray-600 dark:border-gray-500 dark:text-white\" \n                 step=\"0.01\" \n                 min=\"0.01\" \n                 placeholder=\"Desi\" />\n        </div>\n        <button type=\"button\" class=\"remove-hepsijet-package inline-flex items-center p-2 text-sm font-medium text-red-600 bg-red-50 rounded hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-500 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30\" ${packageIndex === 0 ? 'style=\"visibility: hidden;\"' : ''}>\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n          </svg>\n        </button>\n      </div>\n    `;\n    \n    $container.append(packageHtml);\n    updatePackageLabels();\n  }\n\n  // Update package labels after add/remove\n  function updatePackageLabels() {\n    const $container = $('#hepsijet-packages-container');\n    $container.find('.hepsijet-package-item').each(function(index) {\n      $(this).find('span').first().text('Koli ' + (index + 1) + ':');\n      \n      // Hide remove button for first package, show for others\n      if (index === 0) {\n        $(this).find('.remove-hepsijet-package').css('visibility', 'hidden');\n      } else {\n        $(this).find('.remove-hepsijet-package').css('visibility', 'visible');\n      }\n    });\n  }\n\n  // Add package button handler\n  $(document).on('click', '#add-hepsijet-package', function(e) {\n    e.preventDefault();\n    addHepsijetPackage();\n  });\n\n  // Remove package button handler\n  $(document).on('click', '.remove-hepsijet-package', function(e) {\n    e.preventDefault();\n    const $container = $('#hepsijet-packages-container');\n    \n    // Don't allow removing the last package\n    if ($container.find('.hepsijet-package-item').length > 1) {\n      $(this).closest('.hepsijet-package-item').remove();\n      updatePackageLabels();\n    }\n  });\n\n  // Initialize packages when the modal is shown\n  initHepsijetPackages();\n\n  // Warehouses are now loaded server-side in PHP template\n  // No need to load via AJAX - better performance and no race conditions\n  // loadHepsijetWarehouses(); // DISABLED\n\n  // Handle Hepsijet shipment creation\n  const createHepsijetShipment = metabox_wrapper.find('#create-hepsijet-shipment');\n\n  createHepsijetShipment.on('click', function() {\n    const $button = $(this);\n    const originalText = $button.text();\n    const deliveryType = $('input[name=\"hepsijet-delivery-type\"]:checked').val();\n    const deliverySlot = $('#hepsijet-delivery-slot').val();\n    const returnDate = $('#hepsijet-return-date').val();\n    const warehouseId = $('#hepsijet-warehouse').val();\n\n    // Validate warehouse selection\n    if (!warehouseId) {\n      alert('LÃ¼tfen depo seÃ§iniz.');\n      return;\n    }\n\n    // Collect packages data\n    const packages = [];\n    let hasError = false;\n    \n    $('#hepsijet-packages-container .hepsijet-package-item').each(function() {\n      const desi = $(this).find('.hepsijet-package-desi').val();\n      \n      if (!desi || parseFloat(desi) < 0.01) {\n        hasError = true;\n        return false; // Break loop\n      }\n      \n      packages.push({\n        desi: parseFloat(desi)\n      });\n    });\n\n    // Validate inputs\n    if (hasError || packages.length === 0) {\n      alert('LÃ¼tfen tÃ¼m koliler iÃ§in desi deÄerlerini doÄru giriniz.');\n      return;\n    }\n\n    // Validate delivery type specific fields\n    if ((deliveryType === 'sameday' || deliveryType === 'nextday') && !deliverySlot) {\n      alert('LÃ¼tfen teslimat saatini seÃ§iniz.');\n      return;\n    }\n\n    if (deliveryType === 'returned' && !returnDate) {\n      alert('LÃ¼tfen iade tarihini seÃ§iniz.');\n      return;\n    }\n\n    // Disable button and show loading state\n    $button.prop('disabled', true).text(hezarfen_mst_backend.creating_shipment_text);\n\n    const data = {\n      action: hezarfen_mst_backend.create_hepsijet_shipment_action,\n      _wpnonce: hezarfen_mst_backend.create_hepsijet_shipment_nonce,\n      order_id: $(this).data('order_id'),\n      packages: JSON.stringify(packages),\n      type: deliveryType,\n      delivery_slot: deliverySlot || '',\n      delivery_date: returnDate || '',\n      warehouse_id: warehouseId\n    };\n\n    $.post(\n      ajaxurl,\n      data,\n      function (response) {\n        if (response.success) {\n          // Debug: Log the response to console\n          console.log('Hepsijet Response:', response);\n          \n          // Check multiple possible paths for cost_info\n          let costInfo = null;\n          \n          if (response.data && response.data.response_data && response.data.response_data.cost_info) {\n            costInfo = response.data.response_data.cost_info;\n          } else if (response.data && response.data.cost_info) {\n            costInfo = response.data.cost_info;\n          } else if (response.cost_info) {\n            costInfo = response.cost_info;\n          }\n          \n          console.log('Cost Info:', costInfo);\n          \n          if (costInfo) {\n            showShipmentCostModal(costInfo);\n          } else {\n            // No cost info, just reload\n            console.log('No cost_info found, reloading page');\n            location.reload();\n          }\n        } else {\n          alert('Hata: ' + (response.data || 'Bilinmeyen hata'));\n        }\n      }\n    ).fail(function (xhr) {\n      const errorMsg = xhr.responseJSON && xhr.responseJSON.data ? xhr.responseJSON.data : 'BaÄlantÄ± hatasÄ±';\n      alert('Hata: ' + errorMsg);\n    }).always(function() {\n      // Re-enable button\n      $button.prop('disabled', false).text(originalText);\n    });\n  });\n\n  // Show shipment cost alert\n  function showShipmentCostModal(costInfo) {\n    const packages = costInfo.packages || [];\n    const summary = costInfo.summary || {};\n    \n    // Build alert message\n    let message = 'â Barkod BaÅarÄ±yla OluÅturuldu!\\n\\n';\n    message += 'ââââââââââââââââââââââ\\n';\n    message += 'Toplam Maliyet (Tahmini):\\n';\n    message += parseFloat(summary.total_cost_with_vat).toFixed(2) + ' ' + (summary.currency || 'TRY');\n    \n    if (summary.vat_rate) {\n      message += ' (KDV Dahil %' + (summary.vat_rate * 100).toFixed(0) + ')';\n    }\n    \n    message += '\\nââââââââââââââââââââââ\\n\\n';\n    message += 'Koli DetaylarÄ±:\\n\\n';\n    \n    packages.forEach((pkg, index) => {\n      message += 'Koli ' + (pkg.package_number || (index + 1)) + ': ';\n      message += parseFloat(pkg.desi).toFixed(2) + ' desi â ';\n      message += parseFloat(pkg.cost_with_vat).toFixed(2) + ' ' + (summary.currency || 'TRY');\n      message += '\\n';\n    });\n    \n    alert(message);\n    location.reload();\n  }\n\n  // Handle Hepsijet check details button (using event delegation)\n  $(document).off('click', '.check-hepsijet-details').on('click', '.check-hepsijet-details', function(e) {\n    e.preventDefault(); // Prevent form submission\n    e.stopPropagation(); // Stop event bubbling\n    \n    const deliveryNo = $(this).data('delivery_no');\n    const orderId = $(this).data('order_id');\n    const modal = $('#hepsijet-details-modal');\n    const content = $('#hepsijet-details-content');\n\n    // Validate required data\n    if (!deliveryNo || !orderId) {\n      alert('Missing delivery number or order ID');\n      return;\n    }\n\n    // Show modal\n    modal.removeClass('hidden');\n    setTimeout(() => {\n      modal.find('.hez-modal-content').removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');\n    }, 10);\n\n    // Set loading state\n    content.html(`<p class=\"text-sm text-gray-600\">${hezarfen_mst_backend.loading_shipment_details}</p>`);\n\n    // Make AJAX request\n    const data = {\n      action: hezarfen_mst_backend.track_hepsijet_shipment_action,\n      _wpnonce: hezarfen_mst_backend.track_hepsijet_shipment_nonce,\n      delivery_no: deliveryNo\n    };\n\n    console.log('Tracking request data:', data);\n\n    $.post(ajaxurl, data, function(response) {\n      if (response.success) {\n        content.html(formatHepsijetDetails(response.data));\n      } else {\n        const errorMsg = response.data || 'Unknown error';\n        content.html('<div class=\"bg-red-50 border border-red-200 rounded p-3\"><p class=\"text-sm text-red-600\"><strong>Error:</strong> ' + errorMsg + '</p></div>');\n      }\n    }).fail(function(xhr) {\n      const errorMsg = xhr.responseJSON && xhr.responseJSON.data ? xhr.responseJSON.data : 'Connection error occurred';\n      content.html('<div class=\"bg-red-50 border border-red-200 rounded p-3\"><p class=\"text-sm text-red-600\"><strong>Connection Error:</strong> ' + errorMsg + '</p></div>');\n    });\n  });\n\n  // Handle Hepsijet barcode button (using event delegation)\n  $(document).off('click', '.get-hepsijet-barcode').on('click', '.get-hepsijet-barcode', function(e) {\n    e.preventDefault(); // Prevent form submission\n    e.stopPropagation(); // Stop event bubbling\n    \n    const $button = $(this);\n    const deliveryNo = $button.data('delivery_no');\n    const orderId = $button.data('order_id');\n    const originalText = $button.text();\n\n    // Validate required data\n    if (!deliveryNo || !orderId) {\n      alert('Missing delivery number or order ID');\n      return;\n    }\n\n    // Set loading state\n    $button.prop('disabled', true).text(hezarfen_mst_backend.loading_text);\n\n    // Show barcode modal\n    showBarcodeModal(deliveryNo, orderId, function() {\n      $button.prop('disabled', false).text(originalText);\n    });\n  });\n\n  // Handle Hepsijet cancel button (using event delegation)\n  $(document).off('click', '.cancel-hepsijet-shipment').on('click', '.cancel-hepsijet-shipment', function(e) {\n    e.preventDefault(); // Prevent form submission\n    e.stopPropagation(); // Stop event bubbling\n    \n    if (!confirm('GÃ¶nderi iptal edilecektir, onaylÄ±yor musunuz?')) {\n      return;\n    }\n\n    const $button = $(this);\n    const deliveryNo = $button.data('delivery_no');\n    const originalText = $button.text();\n\n    // Set loading state\n    $button.prop('disabled', true).text(hezarfen_mst_backend.cancelling_shipment_text);\n\n    const orderId = $button.data('order_id');\n\n    // Validate required data\n    if (!deliveryNo || !orderId) {\n      alert('Missing required data for cancellation');\n      $button.prop('disabled', false).text(originalText);\n      return;\n    }\n\n    const data = {\n      action: hezarfen_mst_backend.cancel_hepsijet_shipment_action,\n      _wpnonce: hezarfen_mst_backend.cancel_hepsijet_shipment_nonce,\n      delivery_no: deliveryNo,\n      order_id: orderId\n    };\n\n    console.log('Cancel request data:', data);\n\n    $.post(ajaxurl, data, function(response) {\n      if (response.success) {\n        // Update UI to show cancelled state instead of reloading\n        updateShipmentToCancelledState($button);\n        alert('GÃ¶nderi baÅarÄ±yla iptal edildi');\n      } else {\n        // Show the specific error message from the API response\n        const errorMessage = response.data || 'Bilinmeyen hata';\n        alert('Hata: ' + errorMessage);\n      }\n    }).fail(function(xhr, status, error) {\n      // Handle HTTP errors (like 400, 500, etc.)\n      let errorMessage = 'BaÄlantÄ± hatasÄ±';\n      \n      try {\n        // Try to parse the response to get the error message\n        const response = JSON.parse(xhr.responseText);\n        if (response.data) {\n          errorMessage = response.data;\n        }\n      } catch (e) {\n        // If parsing fails, use the HTTP status text\n        if (xhr.statusText) {\n          errorMessage = xhr.statusText;\n        }\n      }\n      \n      alert('Hata: ' + errorMessage);\n    }).always(function() {\n      $button.prop('disabled', false).text(originalText);\n    });\n  });\n\n  // Handle Hepsijet ile AvantajlÄ± Kargo FiyatlarÄ± balance check button\n  $(document).on('click', '#check-kargogate-balance', function(e) {\n    e.preventDefault();\n    \n    const $button = $(this);\n    const originalText = $button.text();\n    \n    // Set loading state\n    $button.prop('disabled', true).text(hezarfen_mst_backend.checking_balance_text);\n    \n    loadKargoGateBalance().always(function() {\n      // Reset button state\n      $button.prop('disabled', false).text(originalText);\n    });\n  });\n\n  // Close details modal\n  $(document).on('click', '.hez-details-modal-close', function() {\n    closeDetailsModal();\n  });\n\n  // Close details modal on backdrop click\n  $(document).on('click', '#hepsijet-details-modal', function(e) {\n    if (e.target === this) {\n      closeDetailsModal();\n    }\n  });\n\n  // Close details modal on escape key\n  $(document).on('keydown', function(e) {\n    if (e.key === 'Escape') {\n      if (!$('#hepsijet-details-modal').hasClass('hidden')) {\n        closeDetailsModal();\n      }\n      if (!$('#hepsijet-barcode-modal').hasClass('hidden')) {\n        closeBarcodeModal();\n      }\n    }\n  });\n\n  // Close barcode modal handlers\n  $(document).on('click', '.hez-barcode-modal-close', function() {\n    closeBarcodeModal();\n  });\n\n  $(document).on('click', '#hepsijet-barcode-modal', function(e) {\n    if (e.target === this) {\n      closeBarcodeModal();\n    }\n  });\n\n  function closeDetailsModal() {\n    const modal = $('#hepsijet-details-modal');\n    modal.find('.hez-modal-content').removeClass('scale-100 opacity-100').addClass('scale-95 opacity-0');\n    setTimeout(() => {\n      modal.addClass('hidden');\n    }, 300);\n  }\n\n  function closeBarcodeModal() {\n    const modal = $('#hepsijet-barcode-modal');\n    modal.find('.hez-modal-content').removeClass('scale-100 opacity-100').addClass('scale-95 opacity-0');\n    setTimeout(() => {\n      modal.addClass('hidden');\n      // Clear iframe src and reset container\n      $('#barcode-pdf-frame').attr('src', '');\n      $('#hepsijet-barcode-content').html(`\n        <div class=\"transform -rotate-90 origin-center\">\n          <iframe id=\"barcode-pdf-frame\" style=\"width: 600px; height: 400px; border: 1px solid #ddd;\" src=\"\"></iframe>\n        </div>\n      `);\n    }, 300);\n  }\n\n  // Update shipment row to show cancelled state\n  function updateShipmentToCancelledState($button) {\n    const $row = $button.closest('tr');\n    \n    // Update row styling\n    $row.removeClass('bg-white').addClass('bg-gray-100 opacity-60');\n    \n    // Update courier title with strikethrough and badge\n    const $courierCell = $row.find('th:first');\n    $courierCell.addClass('text-gray-500 line-through');\n    $courierCell.append('<span class=\"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full\">Cancelled</span>');\n    \n    // Update details cell (now the second column after removing tracking number column)\n    const $detailsCell = $row.find('td:first');\n    const currentTime = new Date().toLocaleString('tr-TR', {\n      day: '2-digit',\n      month: '2-digit', \n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n    \n    // Extract current koli and desi values\n    const koliText = $detailsCell.text().includes('Koli:') ? $detailsCell.text().split('Koli: ')[1].split(' ')[0] : 'N/A';\n    const desiText = $detailsCell.text().includes('Desi:') ? $detailsCell.text().split('Desi: ')[1].trim() : 'N/A';\n    \n    $detailsCell.html(`\n      <div class=\"text-xs text-gray-500\">\n        <div class=\"line-through\">Koli: ${koliText}</div>\n        <div class=\"line-through\">Desi: ${desiText}</div>\n        <div class=\"text-red-600 font-medium mt-1\">Cancelled: ${currentTime}</div>\n      </div>\n    `);\n    \n    // Update actions cell (now the last column)\n    const $actionsCell = $row.find('td:last');\n    const deliveryNo = $button.data('delivery_no');\n    const orderId = $button.data('order_id');\n    \n    $actionsCell.html(`\n      <div class=\"flex gap-1 flex-wrap\">\n        <span class=\"px-2 py-1 bg-gray-300 text-gray-600 rounded text-xs cursor-not-allowed\" title=\"Barcode not available for cancelled shipments\">Barcode</span>\n        <button type=\"button\" data-delivery_no=\"${deliveryNo}\" data-order_id=\"${orderId}\" class=\"check-hepsijet-details cursor-pointer focus:outline-none hover:opacity-80 bg-blue-600 text-white px-2 py-1 rounded text-xs\" title=\"Check tracking details\">Details</button>\n        <span class=\"px-2 py-1 bg-gray-300 text-gray-600 rounded text-xs cursor-not-allowed\">Cancelled</span>\n      </div>\n    `);\n  }\n\n  // Show barcode modal with PDF\n  function showBarcodeModal(deliveryNo, orderId, callback) {\n    const modal = $('#hepsijet-barcode-modal');\n    const pdfFrame = $('#barcode-pdf-frame');\n    \n    console.log('Opening barcode modal for:', { deliveryNo, orderId });\n    \n    // Store data on modal for later use\n    modal.data('current-delivery-no', deliveryNo);\n    modal.data('current-order-id', orderId);\n    \n    // Show modal\n    modal.removeClass('hidden');\n    setTimeout(() => {\n      modal.find('.hez-modal-content').removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');\n    }, 10);\n\n    // Show loading state\n    pdfFrame.parent().html(`<p class=\"text-sm text-gray-600\">${hezarfen_mst_backend.preparing_barcode_text}</p>`);\n\n    // Single AJAX call to get everything\n    const data = {\n      action: hezarfen_mst_backend.get_hepsijet_barcode_pdf_action,\n      _wpnonce: hezarfen_mst_backend.get_hepsijet_barcode_pdf_nonce,\n      delivery_no: deliveryNo,\n      order_id: orderId\n    };\n\n    $.post(ajaxurl, data, function(response) {\n      console.log('AJAX Response received:', response);\n      console.log('Response success:', response.success);\n      console.log('Response data:', response.data);\n      \n      if (response.success) {\n        // Store PDF data FIRST before displaying anything (now contains base64 data)\n        modal.data('pdf-url', response.data.pdf_url);\n        \n        // Display barcode image (now PDF data is available) - handle async\n        displayBarcodeImage(response.data.barcode_data, pdfFrame).catch(error => {\n          console.error('Error displaying barcode/PDF:', error);\n          pdfFrame.parent().html('<div class=\"bg-red-50 border border-red-200 rounded p-3\"><p class=\"text-sm text-red-600\"><strong>Error:</strong> ' + error.message + '</p></div>');\n        });\n        \n        console.log('Combined request successful:', response.data);\n        console.log('PDF data stored (base64):', response.data.pdf_url ? 'Yes' : 'No');\n      } else {\n        console.error('AJAX Response error:', response.data);\n        pdfFrame.parent().html('<div class=\"bg-red-50 border border-red-200 rounded p-3\"><p class=\"text-sm text-red-600\"><strong>Error:</strong> ' + (response.data || 'Unknown error') + '</p></div>');\n      }\n      \n      if (callback) callback();\n    }).fail(function(xhr) {\n      console.error('AJAX Request failed:', xhr);\n      console.error('Status:', xhr.status);\n      console.error('Response Text:', xhr.responseText);\n      \n      const errorMsg = xhr.responseJSON && xhr.responseJSON.data ? xhr.responseJSON.data : 'Connection error occurred';\n      pdfFrame.parent().html('<div class=\"bg-red-50 border border-red-200 rounded p-3\"><p class=\"text-sm text-red-600\"><strong>Connection Error:</strong> ' + errorMsg + '</p></div>');\n      \n      if (callback) callback();\n    });\n  }\n\n  // Load order information\n    // function loadOrderInfo(orderId, container) {\n  //   const data = {\n  //     action: hezarfen_mst_backend.get_order_info_action,\n  //     _wpnonce: hezarfen_mst_backend.get_order_info_nonce,\n  //     order_id: orderId\n  //   };\n  //\n  //   $.post(ajaxurl, data, function(response) {\n  //     if (response.success) {\n  //       container.html(formatOrderInfo(response.data));\n  //     } else {\n  //       container.html('<p class=\"text-sm text-red-600\">Error loading order info</p>');\n  //     }\n  //   }).fail(function() {\n  //       container.html('<p class=\"text-sm text-red-600\">Failed to load order info</p>');\n  //   });\n  // }\n\n  // Load barcode image via Relay API - NO LONGER NEEDED\n  // function loadBarcodePDF(deliveryNo, iframe, callback) {\n  //   const data = {\n  //     action: hezarfen_mst_backend.get_hepsijet_barcode_action,\n  //     _wpnonce: hezarfen_mst_backend.get_hepsijet_barcode_nonce,\n  //     delivery_no: deliveryNo\n  //   };\n  //\n  //   console.log('Loading barcode image for delivery:', deliveryNo);\n  //\n  //   $.post(ajaxurl, data, function(response) {\n  //     console.log('Barcode image response:', response);\n  //     console.log('Response success:', response.success);\n  //     console.log('Response data type:', typeof response.data);\n  //     console.log('Response data:', response.data);\n  //     \n  //     if (response.success && response.data && Array.isArray(response.data) && response.data.length > 0) {\n  //       try {\n  //         // Relay API returns array of base64 images directly\n  //         let imageData = response.data[0];\n  //         \n  //         console.log('Image data length:', imageData.length);\n  //         console.log('Image data prefix:', imageData.substring(0, 50));\n  //         console.log('Image data type:', typeof imageData);\n  //         \n  //         // The data is already in data:image/jpeg;base64 format\n  //         if (!imageData.startsWith('data:image/')) {\n  //           imageData = 'data:image/jpeg;base64,' + imageData;\n  //         }\n  //         \n  //         // Replace iframe with image element for better display\n  //         const container = iframe.parent();\n  //         container.html(`\n  //           <div class=\"transform -rotate-90 origin-center flex justify-center\">\n  //             <img id=\"barcode-image\" src=\"${imageData}\" \n  //                  style=\"max-width: 600px; max-height: 400px; border: 1px solid #ddd;\" \n  //                  alt=\"Hepsijet Barcode Label\" />\n  //           </div>\n  //         `);\n  //         \n  //         // Store data for download button on both the image and modal\n  //         $('#barcode-image').data('image-data', imageData);\n  //         $('#barcode-image').data('delivery-no', deliveryNo);\n  //         $('#hepsijet-barcode-modal').data('image-data', imageData);\n  //         $('#hepsijet-barcode-modal').data('delivery-no', deliveryNo);\n  //         \n  //         console.log('Barcode image loaded successfully');\n  //         console.log('Data stored on elements:', {\n  //           imageElement: $('#barcode-image').data('image-data') ? 'YES' : 'NO',\n  //           modalElement: $('#hepsijet-barcode-modal').data('image-data') ? 'YES' : 'NO',\n  //           imageDataLength: imageData.length\n  //         });\n  //         \n  //       } catch (error) {\n  //         console.error('Image display error:', error);\n  //         iframe.parent().html('<p class=\"text-red-600 text-center\">Barcode yÃ¼klenemedi: ' + error.message + '</p>');\n  //       }\n  //     } else {\n  //       console.error('Invalid barcode response:', response);\n  //       iframe.parent().html('<p class=\"text-red-600 text-center\">Barcode alÄ±namadÄ±: ' + (response.data || 'Invalid response') + '</p>');\n  //       }\n  //     \n  //     if (callback) callback();\n  //   }).fail(function(xhr) {\n  //     console.error('Barcode request failed:', xhr);\n  //     iframe.parent().html('<p class=\"text-red-600 text-center\">BaÄlantÄ± hatasÄ±</p>');\n  //     if (callback) callback();\n  //   });\n  // }\n\n\n\n    // Display PDF directly in the modal with async loading\n  async function displayBarcodeImage(barcodeData, container) {\n    const modal = $('#hepsijet-barcode-modal');\n    const pdfData = modal.data('pdf-url'); // This now contains base64 data\n    \n    console.log('displayBarcodeImage called with:', { barcodeData, pdfData });\n    console.log('Modal data:', modal.data());\n    \n    if (pdfData) {\n      console.log('PDF data found, embedding PDF viewer...');\n      \n      // Show loading state with spinner - target the specific container by ID\n      const targetContainer = $('#hepsijet-barcode-content');\n      console.log('Targeting container by ID:', targetContainer);\n      \n      targetContainer.html(`\n        <div class=\"w-full h-96 flex flex-col justify-center items-center\">\n          <div class=\"text-sm text-gray-600 mb-4\">PDF hazÄ±rlanÄ±yor...</div>\n          <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      `);\n      \n      try {\n        // Since PDF is already generated as base64, we can display it immediately\n        console.log('PDF data ready, embedding PDF viewer');\n        // Replace container with PDF viewer using base64 data\n        targetContainer.html(`\n          <div class=\"w-full h-5/6 flex justify-center\">\n            <iframe \n              id=\"pdf-viewer\" \n              src=\"${pdfData}\" \n              style=\"width: 100%; height: 100%; border: 1px solid #ddd; border-radius: 4px;\" \n              frameborder=\"0\"\n              title=\"Hepsijet Shipment Label PDF\">\n            </iframe>\n          </div>\n        `);\n        \n        console.log('PDF embedded successfully using base64 data');\n      } catch (error) {\n        console.error('PDF display failed:', error);\n        // Fallback to barcode image if PDF display fails\n        displayBarcodeImageFallback(barcodeData, container);\n      }\n    } else {\n      console.log('No PDF data found, falling back to barcode image');\n      displayBarcodeImageFallback(barcodeData, container);\n    }\n  }\n  \n\n  \n  // Fallback to barcode image display\n  function displayBarcodeImageFallback(barcodeData, container) {\n    if (Array.isArray(barcodeData) && barcodeData.length > 0) {\n      try {\n        // Get the first barcode image (base64 data)\n        let imageData = barcodeData[0];\n        \n        // The data is already in data:image/jpeg;base64 format\n        if (!imageData.startsWith('data:image/')) {\n          imageData = 'data:image/jpeg;base64,' + imageData;\n        }\n        \n        // Replace container with image element\n        container.parent().html(`\n          <div class=\"transform -rotate-90 origin-center flex justify-center\">\n            <img id=\"barcode-image\" src=\"${imageData}\" \n                 style=\"max-width: 600px; max-height: 400px; border: 1px solid #ddd;\" \n                 alt=\"Hepsijet Barcode Label\" />\n          </div>\n        `);\n        \n        console.log('Barcode image displayed as fallback');\n      } catch (error) {\n        console.error('Image display error:', error);\n        container.parent().html('<p class=\"text-red-600 text-center\">Barcode yÃ¼klenemedi: ' + error.message + '</p>');\n      }\n    } else {\n      console.log('No barcode data available either');\n      container.parent().html('<p class=\"text-red-600 text-center\">PDF ve barcode verisi bulunamadÄ±</p>');\n    }\n  }\n\n  // Format Hepsijet details response\n  function formatHepsijetDetails(data) {\n    if (!data || !data.data || !Array.isArray(data.data) || data.data.length === 0) {\n      return `<div class=\"bg-yellow-50 border border-yellow-200 rounded p-3\"><p class=\"text-sm text-yellow-600\">${hezarfen_mst_backend.no_tracking_information}</p></div>`;\n    }\n\n    const shipmentData = data.data[0];\n    const transactions = shipmentData.transactions || [];\n\n    let html = '<div class=\"space-y-4\">';\n    \n    // Basic info\n    html += '<div class=\"bg-blue-50 border border-blue-200 p-3 rounded\">';\n    html += '<h4 class=\"font-medium text-blue-900 mb-2\">ð¦ Shipment Information</h4>';\n    html += '<div class=\"text-sm text-blue-700 space-y-1\">';\n    html += '<div><strong>Status:</strong> <span class=\"px-2 py-1 bg-blue-100 rounded text-xs\">' + (shipmentData.deliveryStatus || 'Unknown') + '</span></div>';\n    html += '<div><strong>Delivery No:</strong> ' + (shipmentData.customerDeliveryNo || 'N/A') + '</div>';\n    if (shipmentData.trackingUrl) {\n      html += '<div><strong>Tracking URL:</strong> <a href=\"' + shipmentData.trackingUrl + '\" target=\"_blank\" class=\"text-blue-600 underline\">Open</a></div>';\n    }\n    html += '</div>';\n    html += '</div>';\n\n    // Tracking history\n    if (transactions.length > 0) {\n      html += '<div class=\"bg-gray-50 border border-gray-200 p-3 rounded mt-6\">';\n      html += '<h4 class=\"font-medium text-gray-900 mb-2\">ð Tracking History</h4>';\n      html += '<div class=\"space-y-2 max-h-64 overflow-y-auto\">';\n      \n      // Sort transactions by date (newest first)\n      const sortedTransactions = [...transactions].sort((a, b) => {\n        const dateA = new Date(a.transactionDateTime || 0);\n        const dateB = new Date(b.transactionDateTime || 0);\n        return dateB - dateA;\n      });\n      \n      sortedTransactions.forEach(function(transaction, index) {\n        const isLatest = index === 0;\n        html += '<div class=\"' + (isLatest ? 'bg-green-50 border border-green-200' : 'bg-white border border-gray-200') + ' p-2 rounded text-xs\">';\n        html += '<div class=\"font-medium text-gray-900\">' + (transaction.transaction || 'N/A') + '</div>';\n        if (transaction.location) {\n          html += '<div class=\"text-gray-600\">ð ' + transaction.location + '</div>';\n        }\n        if (transaction.transactionDateTime) {\n          html += '<div class=\"text-gray-500\">ð ' + transaction.transactionDateTime + '</div>';\n        }\n        html += '</div>';\n      });\n      \n      html += '</div>';\n      html += '</div>';\n    } else {\n      html += '<div class=\"bg-gray-50 border border-gray-200 p-3 rounded\">';\n      html += '<p class=\"text-sm text-gray-600\">No tracking history available yet</p>';\n      html += '</div>';\n    }\n\n    html += '</div>';\n    return html;\n  }\n\n  function create_confirmation_modal(metabox_wrapper, shipment_row) {\n    const modal_overlay = metabox_wrapper.find('#modal-body');\n    const modal_content = modal_overlay.find('.hez-modal-content');\n    const $confirmButton = modal_overlay.find('.hez-modal-confirm');\n    \n    // Reset button state before showing modal\n    $confirmButton.prop('disabled', false).text(hezarfen_mst_backend.modal_btn_delete_text);\n    \n    // Show modal with animation\n    modal_overlay.removeClass('hidden');\n    setTimeout(() => {\n      modal_overlay.addClass('show');\n      modal_content.removeClass('scale-95 opacity-0').addClass('scale-100 opacity-100');\n    }, 10);\n    \n    // Focus management for accessibility\n    const focusableElements = modal_overlay.find('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n    const firstFocusable = focusableElements.first();\n    const lastFocusable = focusableElements.last();\n    \n    firstFocusable.focus();\n    \n    // Trap focus within modal\n    modal_overlay.on('keydown', function(e) {\n      if (e.key === 'Tab') {\n        if (e.shiftKey) {\n          if (document.activeElement === firstFocusable[0]) {\n            e.preventDefault();\n            lastFocusable.focus();\n          }\n        } else {\n          if (document.activeElement === lastFocusable[0]) {\n            e.preventDefault();\n            firstFocusable.focus();\n          }\n        }\n      } else if (e.key === 'Escape') {\n        closeModal();\n      }\n    });\n    \n    function closeModal() {\n      modal_content.removeClass('scale-100 opacity-100').addClass('scale-95 opacity-0');\n      setTimeout(() => {\n        modal_overlay.removeClass('show').addClass('hidden');\n        modal_overlay.off('keydown');\n      }, 300);\n    }\n    \n    // Handle confirm button click\n    modal_overlay.find('.hez-modal-confirm').off('click').on('click', function() {\n      const $confirmButton = $(this);\n      const originalText = $confirmButton.text();\n      \n      $confirmButton.prop('disabled', true).text(hezarfen_mst_backend.removing_text);\n      \n      $.post(\n        ajaxurl,\n        {\n          action: hezarfen_mst_backend.remove_shipment_data_action,\n          _wpnonce: hezarfen_mst_backend.remove_shipment_data_nonce,\n          order_id: $('input#post_ID').val(),\n          meta_id: shipment_row.data('meta_id')\n        },\n        function () {\n          shipment_row.fadeOut(300, function() {\n            $(this).remove();\n            // Check if no shipments left and show empty state\n            const remainingShipments = metabox_wrapper.find('tbody tr');\n            if (remainingShipments.length === 0) {\n              location.reload(); // Reload to show empty state\n            }\n          });\n          closeModal();\n        }\n      ).fail(function () {\n        // Reset button state on error\n        $confirmButton.prop('disabled', false).text(originalText);\n        closeModal();\n        // Show error message\n        alert(hezarfen_mst_backend.error_removing_shipment);\n      });\n    });\n    \n    // Handle cancel and close buttons\n    modal_overlay.find('.hez-modal-cancel, .hez-modal-close').off('click').on('click', function() {\n      closeModal();\n    });\n    \n    // Handle backdrop click\n    modal_overlay.on('click', function(e) {\n      if (e.target === modal_overlay[0]) {\n        closeModal();\n      }\n    });\n  }\n\n  function updateCountdown() {\n      var endTime = new Date(\"May 3, 2024 23:59:00\").getTime(); // Set the countdown end date and time\n      var now = new Date().getTime(); // Current time\n      var timeLeft = endTime - now; // Time remaining in milliseconds\n\n      var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));\n      var hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n      var minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));\n      var seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);\n\n      // Display the result in the respective span elements\n      $('#days').text(days);\n      $('#hours').text(hours);\n      $('#minutes').text(minutes);\n      $('#seconds').text(seconds);\n\n      if (timeLeft < 0) {\n          clearInterval(timer);\n          $('#countdown').html(hezarfen_mst_backend.campaign_ended);\n      }\n  }\n\n  updateCountdown(); // Run function once at first to avoid delay\n  var timer = setInterval(updateCountdown, 1000); // Update the countdown every second\n\n  const invoice_type_field = $('.hezarfen_billing_invoice_type_field');\n\n\t$('a.edit_address').on('click', function () {\n\t\t$('.hezarfen-tc-num-field').hide();\n\t});\n\n\tupdate_field_showing_statuses(invoice_type_field.val());\n\n\tinvoice_type_field.on('change', function () {\n\t\tvar invoice_type = $(this).val();\n\t\tupdate_field_showing_statuses(invoice_type);\n\t});\n\n\tfunction update_field_showing_statuses(invoice_type) {\n\t\tif (invoice_type == 'person') {\n\t\t\t$('._billing_hez_TC_number_field').removeClass('hezarfen-hide-form-field');\n\t\t\t$('._billing_hez_tax_number_field').addClass('hezarfen-hide-form-field');\n\t\t\t$('._billing_hez_tax_office_field').addClass('hezarfen-hide-form-field');\n\t\t} else if (invoice_type == 'company') {\n\t\t\t$('._billing_hez_TC_number_field').addClass('hezarfen-hide-form-field');\n\t\t\t$('._billing_hez_tax_number_field').removeClass('hezarfen-hide-form-field');\n\t\t\t$('._billing_hez_tax_office_field').removeClass('hezarfen-hide-form-field');\n\t\t}\n\t}\n\n  // Load Hepsijet ile AvantajlÄ± Kargo FiyatlarÄ± wallet balance\n  function loadKargoGateBalance() {\n    const balanceElement = $('#kargogate-balance');\n    \n    // Set loading state\n    balanceElement.text(hezarfen_mst_backend.loading_text);\n    \n    const data = {\n      action: hezarfen_mst_backend.get_kargogate_balance_action,\n      _wpnonce: hezarfen_mst_backend.get_kargogate_balance_nonce\n    };\n\n    return $.post(ajaxurl, data, function(response) {\n      if (response.success && response.data.balance && response.data.balance.formatted) {\n        // Use HTML content since the formatted balance includes HTML\n        balanceElement.html(response.data.balance.formatted);\n      } else {\n        balanceElement.text(hezarfen_mst_backend.error_loading_balance);\n        console.error('Balance error:', response.data);\n      }\n    }).fail(function(xhr, status, error) {\n      balanceElement.text(hezarfen_mst_backend.connection_error);\n      console.error('Balance AJAX error:', error);\n    });\n  }\n\n  /**\n   * Load HepsiJet warehouses with 3-hour caching\n   */\n  function loadHepsijetWarehouses() {\n    const $warehouseSelect = $('#hepsijet-warehouse');\n    \n    if (!$warehouseSelect.length) {\n      return; // Element not found\n    }\n\n    // Check cache first (3 hours = 10800 seconds)\n    const cacheKey = 'hepsijet_warehouses';\n    const cacheExpiry = 3 * 60 * 60 * 1000; // 3 hours in milliseconds\n    const cached = localStorage.getItem(cacheKey);\n    const cacheTime = localStorage.getItem(cacheKey + '_time');\n    \n    if (cached && cacheTime) {\n      const age = Date.now() - parseInt(cacheTime);\n      if (age < cacheExpiry) {\n        // Use cached data\n        try {\n          const warehouses = JSON.parse(cached);\n          populateWarehouseDropdown(warehouses);\n          return;\n        } catch (e) {\n          // Invalid cache, continue to fetch\n        }\n      }\n    }\n\n    // Fetch from API\n    const data = {\n      action: 'hepsijet_get_warehouses',\n      _wpnonce: hezarfen_mst_backend.create_hepsijet_shipment_nonce\n    };\n\n    $.post(hezarfen_mst_backend.ajax_url, data, function(response) {\n      if (response.success && response.data && response.data.warehouses) {\n        const warehouses = response.data.warehouses;\n        \n        // Cache the response\n        localStorage.setItem(cacheKey, JSON.stringify(warehouses));\n        localStorage.setItem(cacheKey + '_time', Date.now().toString());\n        \n        // Populate dropdown\n        populateWarehouseDropdown(warehouses);\n      } else {\n        $warehouseSelect.html('<option value=\"\">Adres yÃ¼klenemedi</option>');\n      }\n    }).fail(function() {\n      $warehouseSelect.html('<option value=\"\">Adres yÃ¼klenemedi</option>');\n    });\n  }\n\n  /**\n   * Populate warehouse dropdown\n   */\n  function populateWarehouseDropdown(warehouses) {\n    const $warehouseSelect = $('#hepsijet-warehouse');\n    const $container = $('#hepsijet-warehouse-container');\n    \n    $warehouseSelect.empty();\n    \n    if (!warehouses || warehouses.length === 0) {\n      $warehouseSelect.html('<option value=\"\">KayÄ±tlÄ± adres bulunamadÄ±</option>');\n      return;\n    }\n    \n    // If only one warehouse (merchant only), select it by default and hide dropdown\n    if (warehouses.length === 1) {\n      $warehouseSelect.append(\n        $('<option></option>').val(warehouses[0].id).text(warehouses[0].label).attr('selected', 'selected')\n      );\n      $container.hide(); // Hide the entire container\n    } else {\n      // Multiple warehouses - show dropdown\n      $warehouseSelect.append('<option value=\"\">-- Depo SeÃ§iniz --</option>');\n      \n      $.each(warehouses, function(index, warehouse) {\n        $warehouseSelect.append(\n          $('<option></option>')\n            .val(warehouse.id)\n            .text(warehouse.label)\n            .data('warehouse', warehouse)\n        );\n      });\n      \n      $container.show(); // Make sure container is visible\n    }\n  }\n\n});\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0,\n\t\"./style-main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkhezarfen_for_woocommerce\"] = globalThis[\"webpackChunkhezarfen_for_woocommerce\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-main\"], () => (__webpack_require__(\"./assets/admin/order-edit/src/main.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["jQuery","document","ready","$","initializeInterface","$tabContainer","$manualContent","length","removeClass","show","shouldShowFeedback","feedbackDismissed","localStorage","getItem","reviewClicked","initFeedbackRequest","$feedbackRequest","hide","setTimeout","fadeIn","on","setItem","showThankYouMessage","hezarfen_mst_backend","thank_you_message","fadeOut","message","html","click","$content","$button","$buttonText","find","toggleClass","hasClass","addClass","text","data","metabox_wrapper","remove_buttons","shipment_row","parents","create_confirmation_modal","selectedCourier","val","standardFields","hepsijetFields","standardButton","hepsijetButton","hepsijetRotationInterval","startHepsijetRotation","rotatingContainer","items","currentIndex","clearInterval","setInterval","currentItem","eq","nextIndex","nextItem","stopHepsijetRotation","helpContent","button","selectedType","deliverySlotContainer","returnDateContainer","loadReturnDates","showNotification","type","remove","notification","append","returnDateSelect","loading_available_dates","orderId","shippingDistrict","shippingCity","shippingStateField","selectedOption","startDate","Date","toISOString","split","endDate","now","action","_wpnonce","get_return_dates_nonce","start_date","end_date","city","district","post","ajaxurl","response","console","log","success","dates","Array","isArray","options","hasAnyDates","Object","keys","forEach","region","date","error_loading_dates","fail","xhr","status","error","addToTrackList","form","new_shipment_data_action","new_shipment_data_nonce","order_id","new_shipment_courier_html_name","new_shipment_tracking_num_html_name","location","reload","initHepsijetPackages","$container","empty","addHepsijetPackage","packageIndex","packageHtml","updatePackageLabels","each","index","first","css","e","preventDefault","closest","createHepsijetShipment","originalText","deliveryType","deliverySlot","returnDate","warehouseId","alert","packages","hasError","desi","parseFloat","push","prop","creating_shipment_text","create_hepsijet_shipment_action","create_hepsijet_shipment_nonce","JSON","stringify","delivery_slot","delivery_date","warehouse_id","costInfo","response_data","cost_info","showShipmentCostModal","errorMsg","responseJSON","always","summary","total_cost_with_vat","toFixed","currency","vat_rate","pkg","package_number","cost_with_vat","off","stopPropagation","deliveryNo","modal","content","loading_shipment_details","track_hepsijet_shipment_action","track_hepsijet_shipment_nonce","delivery_no","formatHepsijetDetails","loading_text","showBarcodeModal","confirm","cancelling_shipment_text","cancel_hepsijet_shipment_action","cancel_hepsijet_shipment_nonce","updateShipmentToCancelledState","errorMessage","parse","responseText","statusText","checking_balance_text","loadKargoGateBalance","closeDetailsModal","target","key","closeBarcodeModal","attr","$row","$courierCell","$detailsCell","currentTime","toLocaleString","day","month","year","hour","minute","koliText","includes","desiText","trim","$actionsCell","callback","pdfFrame","parent","preparing_barcode_text","get_hepsijet_barcode_pdf_action","get_hepsijet_barcode_pdf_nonce","pdf_url","displayBarcodeImage","barcode_data","catch","barcodeData","container","pdfData","targetContainer","displayBarcodeImageFallback","imageData","startsWith","no_tracking_information","shipmentData","transactions","deliveryStatus","customerDeliveryNo","trackingUrl","sortedTransactions","sort","a","b","dateA","transactionDateTime","dateB","transaction","isLatest","modal_overlay","modal_content","$confirmButton","modal_btn_delete_text","focusableElements","firstFocusable","lastFocusable","last","focus","shiftKey","activeElement","closeModal","removing_text","remove_shipment_data_action","remove_shipment_data_nonce","meta_id","remainingShipments","error_removing_shipment","updateCountdown","endTime","getTime","timeLeft","days","Math","floor","hours","minutes","seconds","timer","campaign_ended","invoice_type_field","update_field_showing_statuses","invoice_type","balanceElement","get_kargogate_balance_action","get_kargogate_balance_nonce","balance","formatted","error_loading_balance","connection_error","loadHepsijetWarehouses","$warehouseSelect","cacheKey","cacheExpiry","cached","cacheTime","age","parseInt","warehouses","populateWarehouseDropdown","ajax_url","toString","id","label","warehouse"],"sourceRoot":""}